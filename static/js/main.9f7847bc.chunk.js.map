{"version":3,"sources":["analysis/changes.js","analysis/chains.js","ui/ErrorBox.js","analysis/dependencies.js","analysis/size.js","ui/graph/NodeSize.js","analysis/info.js","ui/graph/NodeName.js","ui/graph/NodeCard.js","ui/graph/EdgeLinkButton.js","ui/graph/ChainItem.js","ui/EmptyBox.js","ui/graph/ChainsList.js","ui/graph/ChainsExplorer.js","ui/WarningBar.js","ui/ErrorBar.js","ui/graph/ChangesView.js","ui/graph/NodeItem.js","ui/tree.js","ui/graph/NodeList.js","ui/graph/GraphExplorer.js","ui/graph/ParentsExplorer.js","ui/graph/ChildrenExplorer.js","AppUI.js","analysis/webpack.js","App.js","registerServiceWorker.js","index.js","history.js","analysis/utils.js","analysis/graph.js"],"names":["MOCKED_EDGE_KIND","addChange","graph","changes","change","newChanges","Object","lodash__WEBPACK_IMPORTED_MODULE_0__","edge","_graph__WEBPACK_IMPORTED_MODULE_1__","from","to","wasOriginallyEnabled","kind","async","enabled","push","applyChanges","fromNode","nodes","toNode","errors","message","gatherChains","node","toId","path","options","nodesKey","visited","currentPath","id","paths","indexOf","childId","result","analysis_graph","length","idle","ui_ErrorBox","styles","theme","root","background","palette","error","dark","color","contrastText","padding","display","align-items","flex-shrink","icon","margin-right","classes","children","undefined","String","react","className","index_es","label","walkGraph","getDeepNodeChildren","key","cache","then","keys","getRetainedNodes","rootNode","[object Object]","allChildrenPromise","rootsChildrenPromise","Promise","all","allChildren","rootsChildren","ids","lodash","keepOnlyLeafModules","filter","calculateTreeSize","tree","reduce","sum","size","calculateRetainedTreeSize","graph_NodeSize","bigger","red_default","a","A700","smaller","green_default","baseGraph","retainerRootNode","treeSizeCalculator","g","react_promise_es","promise","baseTreeSize","treeSize","title","enterDelay","numeral_default","format","Math","abs","pending","FILENAME_RE","getPackageName","file","found","match","graph_NodeName","maxWidth","flexDirection","whiteSpace","overflow","packageName","textOverflow","flexShrink","minWidth","name","extension","hidePackage","onlyPackage","tooltip","info","pathToPackage","getModuleInfo","replace","text","classnames_default","originalId","placement","disableFocusListener","graph_NodeCard","position","flexGrow","justifyContent","card","marginBottom","edgeButton","left","top","expand","transform","transition","transitions","create","duration","shortest","marginLeft","breakpoints","up","marginRight","expandOpen","args","_temp","super","this","state","expanded","render","_this$props","props","actions","variant","noWrap","disableActionSpacing","onClick","setState","in","gutterBottom","graph_EdgeLinkButton","aria-label","graph_ChainItem","width","link","chain","through","style","checked","dense","ContainerComponent","button","disableGutters","primary","secondary","primaryTypographyProps","ui_EmptyBox","alignItems","textAlign","margin-bottom","graph_ChainsList","list","outline","chains","selectedChain","onChainSelect","usedIds","finalChains","map","dist_es","height","rowCount","rowHeight","rowRenderer","index","_finalChains$index","every","noRowsRenderer","graph_ChainsExplorer","chainsList","selectedChainScroll","overflowY","listProgress","marginTop","chainsPromiseSelector","lib","p","findChains","_waitingForChainsPromise","renderSelectedChain","pinned","onAddChange","onFromNodeSelect","onToNodeSelect","onPinnedToggle","isFirst","isLast","prevNode","renderChains","_this$props2","componentDidMount","componentDidUpdate","prevProps","baseGraphChanged","_this$props3","currentFrom","currentTo","prevFrom","prevTo","fromToIdChanged","chainsPromise","findAllChains","_this$props4","catch","ui_WarningBar","amber_default","ui_ErrorBar","graph_ChangesView","maxHeight","delete","onChangesUpdate","textsToCopy","_window$location","window","location","origin","pathname","hash","currentUrlState","src_history","slice","shareUrl","encodeUrlStateHash","fromName","toName","reverse","react_copy_to_clipboard_lib","join","graph_NodeItem","selectFromNode","selectToNode","selectNode","defaultGetChildren","row","defaultGetKey","isTreeExpanded","_options$getKey","getKey","toggleTreeRowState","current","_options$getKey2","tree_objectSpread","e","toggleTreeRow","treeOptions","group","graph_NodeList","search","listContainer","fuseSelector","_","fuse_default","tokenize","matchAllTokens","searchSelector","s","orderNodesBy","fuse","pinnedSelector","groupSelector","groupNodesBy","orderGroupsBy","rows","groups","unshift","nodesSelector","flattenTreeToRows","_options$getChildren","getChildren","renderList","renderItem","renderEmpty","divider","Boolean","loading","type","value","onChange","el","target","endAdornment","placeholder","graph_GraphExplorer","modeMenuItem","modeId","modeMenuAnchor","modeSelector","modes","defaultMode","getNodes","nodesPromiseSelector","resolve","handleModeMenuOpen","event","currentTarget","handleModeMenuClose","selected","onNodeSelect","mode","listProps","assign","itemProps","fontSize","renderModeMenu","_this$state","currentModeId","anchorEl","open","onClose","renderTitle","nodesPromise","header","renderInfo","headerMore","prepareEntryNodes","parents","parentId","ParentsExplorer_objectSpread","graph_ParentsExplorer","allNodesSelector","getAllNodes","entryNodesSelector","getEntryNodes","leafNodesSelector","getLeafNodes","directParentNodesSelector","getDirectParentNodes","parentNodesSelector","getDeepNodeParents","getParentNodes","parentEntryNodesSelector","getParentEntryNodes","directParents","parentEntries","entries","initialModes","initialAll","initialEntries","initialLeafs","graph_ChildrenExplorer","directChildrenNodesSelector","ChildrenExplorer_objectSpread","getDirectChildrenNodes","retainedChildrenNodesSelector","getChildrenNodes","getRetainedChildrenNodes","childrenNodesSelector","childAsyncNodesSelector","values","child","deepChildId","getDisabledLeafChildren","getChildAsyncNodes","childLeafNodesSelector","getChildLeafNodes","retainedChildren","directChildren","asyncLeafs","childLeafs","leafs","__webpack_exports__","fontFamily","container","panes","parentsExplorer","pathsExplorer","childrenExplorer","textTransform","borderBottom","dropzone","openButton","openFileMessage","alignSelf","margin","cursor","renderGraph","showChanges","onNodesSelectionReset","onFileDrop","onShowChangesToggle","es","multiple","activeClassName","rejectClassName","accept","onDrop","disableClick","ref","LinearProgress_default","progress","href","rel","anchor","readWebpackStats","stats","_graph__WEBPACK_IMPORTED_MODULE_0__","_options$enableAllAsy","enableAllAsyncImports","_options$includeChunk","includeChunks","_stats$chunks","chunks","_stats$modules","modules","chunk","reason","names","original","module","isConcat","isNamespace","identifier","chunkId","reasons","moduleId","moduleIdentifier","userRequest","react_hot_loader__WEBPACK_IMPORTED_MODULE_1__","react__WEBPACK_IMPORTED_MODULE_0__","fromNodeId","toNodeId","handleStorageEvent","newValue","JSON","parse","handleHistoryChange","hashState","_history__WEBPACK_IMPORTED_MODULE_7__","lodash__WEBPACK_IMPORTED_MODULE_2__","pushHistory","encodedState","history","pushState","openFile","json","callback","console","time","_analysis_webpack__WEBPACK_IMPORTED_MODULE_3__","timeEnd","log","warn","handleDrop","rejected","reject","reader","FileReader","onload","onerror","readAsBinaryString","toggleShowChanges","_this$state2","newGraph","_analysis_graph__WEBPACK_IMPORTED_MODULE_4__","_analysis_changes__WEBPACK_IMPORTED_MODULE_5__","updateChanges","localStorage","setItem","stringify","_this$state3","Error","setNodesSelection","resetNodesSelection","_this$state4","_this$state5","togglePinned","wasPinned","pin","initLocalStorage","initHistory","NODE_ENV","PUBLIC_URL","REACT_APP_STATS","fetch","prevState","hasNewBaseGraph","hasNewChanges","getItem","addEventListener","_this$state6","_AppUI__WEBPACK_IMPORTED_MODULE_6__","isLocalhost","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","rootEl","document","getElementById","URL","response","status","headers","get","ready","unregister","reload","react_dom_default","react_default","createElement","App","btoa","pako__WEBPACK_IMPORTED_MODULE_0___default","deflate","level","decodeUrlStateHash","decoded","atob","startsWith","inflate","ABORTED","Symbol","backgroundProcessor","abort","idleReject","fn","setTimeout","err","createGraph","edges","getNodeId","getEdgeId","getNode","resolveNode","resolveEdgeForNodes","bind","addNode","_node","addEdge","_edge","toggleEdge","abortGraph","cloneGraph"],"mappings":"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","file":"static/js/main.9f7847bc.chunk.js","sourcesContent":["// @flow\n\nimport type {Graph, NodeID} from './graph'\n\nimport {reject, pick} from 'lodash'\nimport {toggleEdge, addEdge, resolveEdgeForNodes} from './graph'\n\nexport type EdgeChange = {|\n  change: 'edge',\n  from: NodeID,\n  to: NodeID,\n  enabled: boolean,\n|}\n\nexport type Change = EdgeChange\n\nexport const MOCKED_EDGE_KIND = 'mocked'\n\nexport function addChange(graph: Graph, changes: $ReadOnlyArray<Change>, change: Change) {\n  // Remove same changes from queue\n  const newChanges = reject(changes, pick(change, ['change', 'from', 'to']))\n  if (change.change === 'edge') {\n    const edge = resolveEdgeForNodes(graph, change.from, change.to)\n    const wasOriginallyEnabled = edge ? edge.kind !== MOCKED_EDGE_KIND && !edge.async : false\n    // Add to queue only if it's a different state than originally\n    if (change.enabled !== wasOriginallyEnabled) {\n      newChanges.push(change)\n    }\n  }\n  return newChanges\n}\n\nexport function applyChanges(graph: Graph, changes: $ReadOnlyArray<Change>) {\n  for (const change of changes) {\n    if (change.change === 'edge') {\n      const fromNode = graph.nodes[change.from]\n      const toNode = graph.nodes[change.to]\n      if (!fromNode || !toNode) {\n        graph.errors.push({message: `One of the nodes is missing, cannot apply the change`, change})\n        continue\n      }\n\n      let edge = resolveEdgeForNodes(graph, change.from, change.to)\n      if (!edge) {\n        edge = addEdge(graph, {\n          from: change.from,\n          to: change.to,\n          enabled: change.enabled,\n          kind: MOCKED_EDGE_KIND,\n        })\n      }\n      toggleEdge(graph, edge, change.enabled)\n    }\n  }\n}\n","// @flow\n\nimport type {Graph, Node, NodeID} from './graph'\nimport {getNode} from './graph'\n\nexport type EdgeChain = NodeID[]\n\nasync function gatherChains(\n  graph: Graph,\n  node: Node,\n  toId: NodeID,\n  path: NodeID[],\n  options: {visited: {[NodeID]: Node}, nodesKey: string},\n) {\n  const {nodesKey, visited} = options\n\n  const currentPath = [...path, node.id]\n  if (node.id === toId) return [currentPath]\n\n  visited[node.id] = node\n  const paths = []\n\n  // prefer shortest paths first\n  if (node[nodesKey].indexOf(toId) >= 0) {\n    paths.push([...currentPath, toId])\n  }\n\n  for (const childId of node[nodesKey]) {\n    if (visited[childId]) continue\n    if (childId === toId) continue\n    const result = await gatherChains(graph, getNode(graph, childId), toId, currentPath, options)\n    if (result.length > 0) {\n      paths.push(...result)\n    }\n    await graph.idle()\n  }\n  return paths\n}\n\nexport async function findChains(graph: Graph, fromNode: Node, toNode: Node): Promise<EdgeChain[]> {\n  const key = `findChains:${fromNode.id}:${toNode.id}`\n  if (!graph.cache[key]) {\n    graph.cache[key] = gatherChains(graph, fromNode, toNode.id, [], {\n      visited: {},\n      nodesKey: 'children',\n    })\n  }\n  return graph.cache[key]\n}\n\nexport async function findAllChains(\n  graph: Graph,\n  fromNode: Node,\n  toNode: Node,\n): Promise<EdgeChain[]> {\n  const key = `findAllChains:${fromNode.id}:${toNode.id}`\n  if (!graph.cache[key]) {\n    graph.cache[key] = gatherChains(graph, fromNode, toNode.id, [], {\n      visited: {},\n      nodesKey: 'allChildren',\n    })\n  }\n  return graph.cache[key]\n}\n","// @flow\n\nimport * as React from 'react'\nimport {withStyles, Icon} from '@material-ui/core'\n\ntype Props = {|\n  error?: any,\n  children?: React.Node,\n  classes: Object,\n|}\n\nconst styles = theme => ({\n  root: {\n    background: theme.palette.error.dark,\n    color: theme.palette.error.contrastText,\n    padding: 16,\n    display: 'flex',\n    'align-items': 'center',\n    'flex-shrink': 0,\n  },\n  icon: {\n    'margin-right': 8,\n  },\n})\n\nconst ErrorBox = ({classes, error, children}: Props) => {\n  if (children === undefined) children = String(error)\n  return (\n    <div className={classes.root}>\n      <Icon className={classes.icon}>error</Icon>\n      <span className={classes.label}>\n        {React.isValidElement(children) ? children : String(children)}\n      </span>\n    </div>\n  )\n}\n\nexport default withStyles(styles)(ErrorBox)\n","// @flow\n\nimport {difference} from 'lodash'\nimport type {Graph, Node, NodeID} from './graph'\nimport {getNode} from './graph'\n\nasync function walkGraph(\n  graph: Graph,\n  node: Node,\n  options: {visited: {[NodeID]: Node}, nodesKey: string},\n) {\n  const {nodesKey, visited} = options\n  visited[node.id] = node\n\n  for (const childId of node[nodesKey]) {\n    if (visited[childId]) continue\n    await walkGraph(graph, getNode(graph, childId), options)\n    await graph.idle()\n  }\n}\n\nexport function getDeepNodeChildren(graph: Graph, node: Node): Promise<$ReadOnlyArray<NodeID>> {\n  const key = `getDeepNodeChildren:${node.id}`\n  if (!graph.cache[key]) {\n    const visited = {}\n    graph.cache[key] = walkGraph(graph, node, {visited, nodesKey: 'children'}).then(() => {\n      // $FlowFixMe\n      delete visited[node.id]\n      return Object.keys(visited)\n    })\n  }\n  return graph.cache[key]\n}\n\nexport function getDeepNodeParents(graph: Graph, node: Node): Promise<$ReadOnlyArray<NodeID>> {\n  const key = `getDeepNodeParents:${node.id}`\n  if (!graph.cache[key]) {\n    const visited = {}\n    graph.cache[key] = walkGraph(graph, node, {visited, nodesKey: 'parents'}).then(() => {\n      // $FlowFixMe\n      delete visited[node.id]\n      return Object.keys(visited)\n    })\n  }\n  return graph.cache[key]\n}\n\n// Returns all children nodes, whose edge is disabled. It doesn't go into the disabled\n// nodes, so it's useful to find first nodes where dependency chain was broken apart.\nexport function getDisabledLeafChildren(graph: Graph, node: Node): Promise<$ReadOnlyArray<NodeID>> {\n  const key = `getDisabledLeafChildren:${node.id}`\n  if (!graph.cache[key]) {\n    const visited = {}\n\n    // Get all accessible children\n    graph.cache[key] = walkGraph(graph, node, {visited, nodesKey: 'children'}).then(() => {\n      const children: Node[] = (Object.values(visited): any)\n      const found = {}\n      // Gather all children. If they were not visited in the first pass,\n      // then they HAVE to be disabled\n      for (const child of children) {\n        for (const deepChildId of child.allChildren) {\n          if (!visited[deepChildId]) {\n            found[deepChildId] = true\n          }\n        }\n      }\n      return Object.keys(found)\n    })\n  }\n  return graph.cache[key]\n}\n\n// Returns all nodes introduced to the dependency tree of rootNode by adding the node to it.\n// In another word - how many modules are retained in the dependency tree because of the `node`\n// Does not include the node itself\nexport function getRetainedNodes(\n  graph: Graph,\n  rootNode: Node,\n  node: Node,\n): Promise<$ReadOnlyArray<NodeID>> {\n  const key = `getRetainedNodes:${rootNode.id}:${node.id}`\n  if (!graph.cache[key]) {\n    const visited = {\n      [node.id]: node,\n    }\n    const allChildrenPromise = getDeepNodeChildren(graph, rootNode)\n    const rootsChildrenPromise = walkGraph(graph, rootNode, {visited, nodesKey: 'children'}).then(\n      () => {\n        return Object.keys(visited)\n      },\n    )\n    graph.cache[key] = Promise.all([allChildrenPromise, rootsChildrenPromise]).then(\n      ([allChildren, rootsChildren]) => {\n        // If they're not connected - there's no retention\n        if (allChildren.indexOf(node.id) < 0) {\n          return []\n        }\n        // All children in the tree except the ones connected to the root\n        const ids = difference(allChildren, rootsChildren)\n        ids.push(node.id)\n        return ids\n      },\n    )\n  }\n  return graph.cache[key]\n}\n\nexport function keepOnlyEntryModules(graph: Graph, nodes: $ReadOnlyArray<Node>) {\n  return nodes.filter((node: Node) => {\n    if (node.kind !== 'module') return false\n    return node.parents.every(parentId => getNode(graph, parentId).kind !== 'module')\n  })\n}\n\nexport function keepOnlyLeafModules(graph: Graph, nodes: $ReadOnlyArray<Node>) {\n  return nodes.filter((node: Node) => {\n    if (node.kind !== 'module') return false\n    return node.children.length === 0\n  })\n}\n","// @flow\n\nimport type {Graph, Node, NodeID} from './graph'\nimport {getNode} from './graph'\nimport {getDeepNodeChildren, getRetainedNodes} from './dependencies'\n\nexport type EdgePath = NodeID[]\n\nexport function calculateTreeSize(graph: Graph, node: Node): Promise<number> {\n  const key = `calculateTreeSize:${node.id}`\n\n  if (!graph.cache[key]) {\n    graph.cache[key] = getDeepNodeChildren(graph, node).then(tree =>\n      tree.reduce((sum, id) => sum + getNode(graph, id).size, node.size),\n    )\n  }\n  return graph.cache[key]\n}\n\nexport function calculateRetainedTreeSize(\n  graph: Graph,\n  rootNode: Node,\n  node: Node,\n): Promise<number> {\n  const key = `calculateRetainedTreeSize:${rootNode.id}:${node.id}`\n\n  if (!graph.cache[key]) {\n    graph.cache[key] = getRetainedNodes(graph, rootNode, node).then(tree =>\n      tree.reduce((sum, id) => sum + getNode(graph, id).size, 0),\n    )\n  }\n  return graph.cache[key]\n}\n","// @flow\nimport type {Graph, Node} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport numeral from 'numeral'\nimport Async from 'react-promise'\nimport {withStyles, Tooltip} from '@material-ui/core'\nimport red from '@material-ui/core/colors/red'\nimport green from '@material-ui/core/colors/green'\n\nimport {calculateTreeSize, calculateRetainedTreeSize} from '../../analysis/size'\n\ntype Props = {|\n  baseGraph: Graph,\n  graph: Graph,\n  retainerRootNode?: ?Node,\n  node: Node,\n  classes: Object,\n|}\n\nconst styles = theme => ({\n  bigger: {\n    color: red.A700,\n  },\n  smaller: {\n    color: green.A700,\n  },\n})\n\nfunction NodeSize({baseGraph, graph, node, retainerRootNode, classes}: Props) {\n  const treeSizeCalculator = retainerRootNode\n    ? g => calculateRetainedTreeSize(g, retainerRootNode, node)\n    : g => calculateTreeSize(g, node)\n  return (\n    <Async\n      promise={Promise.all([\n        baseGraph ? treeSizeCalculator(baseGraph) : undefined,\n        treeSizeCalculator(graph),\n      ])}\n      then={([baseTreeSize, treeSize]) => (\n        <>\n          {!retainerRootNode || treeSize > 0 ? (\n            <>\n              <Tooltip title=\"Node size\" enterDelay={500}>\n                <span>{numeral(node.size).format('0[.]0b')}</span>\n              </Tooltip>\n              {' + '}\n              <Tooltip\n                title={retainerRootNode ? 'Size of retained dependencies ' : 'Size of dependencies'}\n                enterDelay={500}\n              >\n                <span>{numeral(treeSize - node.size).format('0[.]0b')}</span>\n              </Tooltip>\n            </>\n          ) : (\n            'unrelated'\n          )}\n          {baseTreeSize != null && treeSize !== baseTreeSize ? (\n            <Tooltip title=\"Difference without changes\" enterDelay={500}>\n              <span className={treeSize > baseTreeSize ? classes.bigger : classes.smaller}>\n                {' ('}\n                {treeSize > baseTreeSize ? '+' : '-'}\n                {numeral(Math.abs(treeSize - baseTreeSize)).format('0[.]0b')}\n                {')'}\n              </span>\n            </Tooltip>\n          ) : null}\n        </>\n      )}\n      pending={'...'}\n    />\n  )\n}\nexport default withStyles(styles)(NodeSize)\n","// @flow\n\nimport type {Node, NodeID} from './graph'\n\nexport type EdgePath = NodeID[]\n\n// https://regex101.com/r/yU5wqf/2\n// 1 - path to packages dir (null if no package)\n// 2 - package name (null if no package)\n// 3 - directory in package\n// 4 - filename\n// 5 - extension\nconst FILENAME_RE = /^(?:(.*\\/(?:node_modules|web_modules|packages|~)\\/)((?:@[^/]+?\\/)?[^/]+))?(.*?\\/)?([^/]+)?(\\.[^./]+)?$/\n\ntype ModuleInfo = {|\n  pathToPackage?: string,\n  packageName?: string,\n  path?: string,\n  name?: string,\n  extension?: string,\n|}\n\nexport function getModuleInfo({file, name, id}: Node): ModuleInfo {\n  if (!file) {\n    return {name: name || String(id) || '(unknown)'}\n  }\n  const found = file.match(FILENAME_RE)\n  if (!found) {\n    return {path: file}\n  }\n  return {\n    pathToPackage: found[1],\n    packageName: found[2],\n    path: found[3],\n    name: found[4],\n    extension: found[5],\n  }\n}\n\nexport function getPackageName({file}: Node): string {\n  if (!file) return ''\n  const found = file.match(FILENAME_RE)\n  return found ? found[2] : ''\n}\n\nexport function getPackageRelativeFilePath(node: Node): string {\n  const {file} = node\n  if (!file) return ''\n  const pkg = getPackageName(node)\n  if (!pkg) return ''\n  return file.slice(file.indexOf(pkg) + pkg.length + 1)\n}\n\nexport function isExternal({file}: Node): boolean {\n  if (!file) return false\n  return file.indexOf('/node_modules/') >= 0\n}\n\nexport function getFileExtension({file}: Node): string {\n  if (!file) return ''\n  const dot = file.lastIndexOf('.')\n  if (dot <= 0) return ''\n  return file.slice(dot + 1)\n}\n","// @flow\nimport type {Node} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport {withStyles, Tooltip} from '@material-ui/core'\n\nimport {getModuleInfo} from '../../analysis/info'\n\ntype Props = {|\n  node: Node,\n  hidePackage?: boolean,\n  onlyPackage?: boolean,\n  tooltip?: boolean | string,\n  children?: React.Node,\n  classes: Object,\n  className?: string,\n|}\n\nconst styles = theme => ({\n  root: {\n    maxWidth: '100%',\n    display: 'inline-flex',\n    flexDirection: 'row',\n    whiteSpace: 'nowrap',\n    overflow: 'hidden',\n  },\n  packageName: {\n    textOverflow: 'ellipsis',\n    flexShrink: 10,\n    overflow: 'hidden',\n  },\n  path: {\n    textOverflow: 'ellipsis',\n    flexShrink: 1000,\n    overflow: 'hidden',\n    minWidth: 10,\n  },\n  name: {\n    textOverflow: 'ellipsis',\n    flexShrink: 1,\n    overflow: 'hidden',\n  },\n  extension: {\n    flexShrink: 0,\n  },\n})\n\nfunction NodeName({node, hidePackage, onlyPackage, tooltip, children, classes, className}: Props) {\n  // {selectFromNode && <a onClick={() => selectFromNode(node.id)}>From</a>}\n  // {selectToNode && <a onClick={() => selectToNode(node.id)}>To</a>}\n\n  const info = getModuleInfo(node)\n\n  const packageName = hidePackage ? '' : info.packageName\n  const path = onlyPackage ? '' : (info.path || '').replace(/^\\/|\\/$/g, '')\n  const name = onlyPackage ? '' : (info.name || '') + (info.extension || '')\n\n  const text = (\n    <span className={classNames(className, classes.root)}>\n      {packageName && <span className={classes.packageName}>{packageName}</span>}\n      {packageName && path ? '/' : ''}\n      {path && <span className={classes.path}>{path}</span>}\n      {(packageName || path) && name ? '/' : ''}\n      {name && <span className={classes.name}>{name}</span>}\n      {(packageName || name) && children ? <span>,&nbsp;</span> : ''}\n      {children && <span className={classes.children}>{children}</span>}\n    </span>\n  )\n\n  if (tooltip) {\n    return (\n      <Tooltip\n        title={\n          typeof tooltip === 'boolean'\n            ? `${node.kind}: ${node.name || ''} (${String(node.originalId)})`\n            : tooltip\n        }\n        placement=\"top\"\n        enterDelay={100}\n        disableFocusListener\n      >\n        {text}\n      </Tooltip>\n    )\n  }\n\n  return text\n}\nexport default withStyles(styles)(NodeName)\n","// @flow\n\nimport type {Graph, Node, Edge} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport {\n  withStyles,\n  Typography,\n  IconButton,\n  Icon,\n  Card,\n  CardContent,\n  Collapse,\n  CardActions,\n} from '@material-ui/core'\n\nimport NodeSize from './NodeSize'\nimport NodeName from './NodeName'\n\ntype Props = {|\n  baseGraph: Graph,\n  graph: Graph,\n  node: Node,\n  retainerRootNode?: ?Node,\n  edge?: ?Edge,\n  actions?: React.Node,\n  classes: Object,\n  className?: string,\n|}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    position: 'relative',\n    flexDirection: 'column',\n    flexShrink: 0,\n    flexGrow: 0,\n    justifyContent: 'stretch',\n  },\n  card: {\n    marginBottom: 24,\n    position: 'relative',\n  },\n  edgeButton: {\n    position: 'absolute',\n    left: -32,\n    top: 12,\n  },\n  expand: {\n    transform: 'rotate(0deg)',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n    marginLeft: 'auto',\n    [theme.breakpoints.up('sm')]: {\n      marginRight: -8,\n    },\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n})\n\ntype State = {\n  expanded: boolean,\n}\n\nclass NodeCard extends React.PureComponent<Props, State> {\n  state = {\n    expanded: false,\n  }\n  render() {\n    const {classes, className, baseGraph, graph, node, retainerRootNode, edge, actions} = this.props\n    const {expanded} = this.state\n\n    return (\n      <div className={classNames(className, classes.root)}>\n        <Card className={classes.card}>\n          <CardContent>\n            <Typography variant=\"headline\" noWrap>\n              <NodeName node={node} hidePackage tooltip />\n            </Typography>\n            <Typography variant=\"subheading\">\n              <NodeName node={node} onlyPackage />\n            </Typography>\n            <Typography color=\"textSecondary\">\n              <NodeSize\n                baseGraph={baseGraph}\n                graph={graph}\n                node={node}\n                retainerRootNode={retainerRootNode}\n              />\n            </Typography>\n          </CardContent>\n          <CardActions className={classes.actions} disableActionSpacing>\n            {actions}\n            <IconButton\n              className={classNames(classes.expand, expanded && classes.expandOpen)}\n              onClick={() => this.setState({expanded: !expanded})}\n            >\n              <Icon>expand_more</Icon>\n            </IconButton>\n          </CardActions>\n          <Collapse in={expanded}>\n            <CardContent>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                Name\n              </Typography>\n              <Typography variant=\"body2\" gutterBottom>\n                {node.name}\n              </Typography>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                Kind\n              </Typography>\n              <Typography variant=\"body2\" gutterBottom>\n                {String(node.kind)}\n              </Typography>\n              <Typography variant=\"caption\" color=\"textSecondary\">\n                ID\n              </Typography>\n              <Typography variant=\"body2\" gutterBottom>\n                {String(node.originalId)}\n              </Typography>\n              {edge && (\n                <>\n                  <Typography variant=\"caption\" color=\"textSecondary\">\n                    Edge type\n                  </Typography>\n                  <Typography variant=\"body2\" gutterBottom>\n                    {edge.kind}\n                  </Typography>\n                  <Typography variant=\"caption\" color=\"textSecondary\">\n                    Edge name\n                  </Typography>\n                  <Typography variant=\"body2\" gutterBottom>\n                    {edge.name || ''}\n                  </Typography>\n                </>\n              )}\n            </CardContent>\n          </Collapse>\n        </Card>\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(NodeCard)\n","// @flow\n\nimport type {Edge} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport {withStyles, Icon, IconButton, Tooltip} from '@material-ui/core'\n\ntype Props = {|\n  edge: Edge,\n  onClick: Function,\n  classes: Object,\n  className?: string,\n|}\n\nconst styles = theme => ({\n  root: {},\n})\n\nclass EdgeLinkButton extends React.PureComponent<Props> {\n  render() {\n    const {classes, className, edge, onClick} = this.props\n\n    return (\n      <Tooltip\n        title={`${edge.enabled ? 'Unlink' : 'Link'} this node with above one`}\n        disableFocusListener\n        placement=\"top\"\n        enterDelay={500}\n      >\n        <IconButton\n          className={classNames(className, classes.root)}\n          aria-label=\"Unlink\"\n          color={edge.enabled ? 'secondary' : 'default'}\n          onClick={onClick}\n        >\n          <Icon>{edge.enabled ? 'link_off' : 'link'}</Icon>\n        </IconButton>\n      </Tooltip>\n    )\n  }\n}\n\nexport default withStyles(styles)(EdgeLinkButton)\n","// @flow\n\nimport type {Graph, NodeID} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport {withStyles, ListItem, ListItemText} from '@material-ui/core'\n\nimport {getNode} from '../../analysis/graph'\nimport NodeName from './NodeName'\n\ntype Props = {|\n  graph: Graph,\n  chain: $ReadOnlyArray<NodeID>,\n  through: $ReadOnlyArray<NodeID>,\n  checked?: boolean,\n\n  onClick: Function,\n\n  style: Object,\n  classes: Object,\n|}\n\nconst styles = theme => ({\n  root: {},\n  nodes: {\n    display: 'flex',\n    flexDirection: 'row',\n  },\n  node: {\n    width: 300,\n    marginRight: 24,\n    position: 'relative',\n  },\n  link: {\n    position: 'absolute',\n    left: -24,\n    top: 0,\n  },\n})\n\nfunction ChainItem({graph, chain, through, onClick, style, classes, checked}: Props) {\n  return (\n    <div style={style}>\n      <ListItem dense ContainerComponent=\"div\" button onClick={onClick} disableGutters>\n        <ListItemText\n          primary={through.length ? <NodeName node={getNode(graph, through[0])} /> : 'Direct'}\n          secondary={`${chain.length - 1} nodes deep`}\n          primaryTypographyProps={{noWrap: true, color: checked ? 'secondary' : 'default'}}\n        />\n      </ListItem>\n    </div>\n  )\n}\n\nexport default withStyles(styles)(ChainItem)\n","// @flow\n\nimport * as React from 'react'\nimport {withStyles} from '@material-ui/core'\n\ntype Props = {|\n  children: React.Node,\n  icon: React.Node,\n  classes: Object,\n|}\n\nconst styles = theme => ({\n  root: {\n    color: theme.palette.text.secondary,\n    padding: 24,\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexShrink: 0,\n    textAlign: 'center',\n  },\n  icon: {\n    'margin-bottom': 8,\n  },\n})\n\nconst EmptyBox = ({classes, children, icon}: Props) => (\n  <div className={classes.root}>\n    <div className={classes.icon}>{icon}</div>\n    <div>{children}</div>\n  </div>\n)\n\nexport default withStyles(styles)(EmptyBox)\n","// @flow\n\nimport type {Graph, Node, NodeID} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport {difference} from 'lodash'\nimport {List, AutoSizer} from 'react-virtualized'\nimport {withStyles, Icon} from '@material-ui/core'\n\nimport ChainItem from './ChainItem'\nimport EmptyBox from '../EmptyBox'\n\ntype Props = {|\n  graph: Graph,\n  fromNode: Node,\n  toNode: Node,\n  chains: $ReadOnlyArray<$ReadOnlyArray<NodeID>>,\n  selectedChain: $ReadOnlyArray<NodeID>,\n  onChainSelect: (nodes: $ReadOnlyArray<NodeID>) => void,\n  classes: Object,\n  className?: string,\n|}\n\nconst styles = theme => ({\n  root: {\n    position: 'relative',\n  },\n  list: {\n    outline: 0,\n  },\n})\n\nfunction ChainsList(props: Props) {\n  const {classes, className, graph, chains, fromNode, toNode, selectedChain, onChainSelect} = props\n  const usedIds = [fromNode.id, toNode.id]\n  const finalChains = chains.map(chain => {\n    const through = difference(chain, usedIds)\n    usedIds.push(...through)\n    return {through, chain}\n  })\n\n  return (\n    <div className={classNames(className, classes.root)}>\n      <AutoSizer>\n        {({width, height}) => (\n          <List\n            className={classes.list}\n            width={width}\n            height={height}\n            rowCount={finalChains.length}\n            rowHeight={54}\n            rowRenderer={({index, style}) => {\n              const {chain, through} = finalChains[index]\n              return (\n                <ChainItem\n                  key={index}\n                  graph={graph}\n                  chain={chain}\n                  through={through}\n                  onClick={() => onChainSelect(chain)}\n                  style={style}\n                  checked={selectedChain.every((id, index) => chain[index] === id)}\n                />\n              )\n            }}\n            noRowsRenderer={() => (\n              <EmptyBox icon={<Icon>link_off</Icon>}>\n                There is no connection between these nodes\n              </EmptyBox>\n            )}\n          />\n        )}\n      </AutoSizer>\n    </div>\n  )\n}\n\nexport default withStyles(styles)(ChainsList)\n","// @flow\n\nimport type {Graph, Node, NodeID} from '../../analysis/graph'\nimport type {Change} from '../../analysis/changes'\nimport classNames from 'classnames'\n\nimport * as React from 'react'\nimport {createSelector} from 'reselect'\nimport Async from 'react-promise'\nimport {withStyles, Typography, LinearProgress, IconButton, Icon, Tooltip} from '@material-ui/core'\n\nimport {findChains, findAllChains} from '../../analysis/chains'\nimport ErrorBox from '../ErrorBox'\nimport NodeCard from './NodeCard'\nimport {getNodes, resolveEdgeForNodes} from '../../analysis/graph'\nimport EdgeLinkButton from './EdgeLinkButton'\nimport ChainsList from './ChainsList'\n\ntype Props = {|\n  baseGraph: Graph,\n  graph: Graph,\n  fromNode: ?Node,\n  toNode: ?Node,\n  pinned: $ReadOnlyArray<NodeID>,\n  onPinnedToggle: NodeID => any,\n  onAddChange: Change => any,\n  onFromNodeSelect: NodeID => any,\n  onToNodeSelect: NodeID => any,\n  classes: Object,\n  className?: string,\n|}\n\ntype State = {\n  selectedChain: ?$ReadOnlyArray<NodeID>,\n}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    position: 'relative',\n    flexDirection: 'row',\n    justifyContent: 'stretch',\n  },\n\n  chains: {\n    width: 300,\n    flexGrow: 0.2,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'stretch',\n    marginRight: 24,\n  },\n  chainsList: {\n    flexGrow: 1,\n  },\n  selectedChain: {\n    display: 'flex',\n    flexDirection: 'column',\n    flexGrow: 1,\n    position: 'relative',\n    width: 300,\n  },\n  selectedChainScroll: {\n    overflowY: 'auto',\n    padding: '0 8px 0 8px',\n  },\n  listProgress: {\n    marginTop: 16,\n  },\n})\n\nclass ChainsExplorer extends React.PureComponent<Props, State> {\n  state = {\n    selectedChain: null,\n  }\n\n  chainsPromiseSelector = createSelector(\n    p => p.graph,\n    p => p.fromNode,\n    p => p.toNode,\n    (graph, fromNode, toNode) => {\n      if (!fromNode || !toNode) return null\n      return findChains(graph, fromNode, toNode)\n    },\n  )\n\n  componentDidMount() {\n    this.componentDidUpdate({})\n  }\n\n  _waitingForChainsPromise: any\n  async componentDidUpdate(prevProps) {\n    const baseGraphChanged = this.props.baseGraph !== prevProps.baseGraph\n    const {fromNode: currentFrom, toNode: currentTo} = this.props\n    const {fromNode: prevFrom, toNode: prevTo} = prevProps\n    const fromToIdChanged =\n      (currentFrom && currentFrom.id) !== (prevFrom && prevFrom.id) ||\n      (currentTo && currentTo.id) !== (prevTo && prevTo.id)\n    if (baseGraphChanged || fromToIdChanged) {\n      // Select the first chain whenever nodes or base graph changes,\n      // but keep it if user edits the graph\n      const chainsPromise = this.chainsPromiseSelector(this.props)\n      this.setState({\n        selectedChain: null,\n      })\n      this._waitingForChainsPromise = chainsPromise\n      if (currentFrom && currentTo && chainsPromise) {\n        let chains = await chainsPromise\n        if (chains.length === 0) {\n          // if no chains are found, search for chains with disabled edges\n          chains = await findAllChains(this.props.graph, currentFrom, currentTo)\n        }\n        if (this._waitingForChainsPromise !== chainsPromise) return\n        this.setState({selectedChain: chains[0] || [currentFrom.id, currentTo.id]})\n      }\n    }\n  }\n\n  renderSelectedChain = () => {\n    const {\n      baseGraph,\n      graph,\n      pinned,\n      fromNode,\n      onAddChange,\n      onFromNodeSelect,\n      onToNodeSelect,\n      onPinnedToggle,\n    } = this.props\n    const {selectedChain} = this.state\n    if (!selectedChain) return null\n    const nodes = getNodes(graph, selectedChain)\n\n    return nodes.map((node: Node, index) => {\n      const isFirst = index === 0\n      const isLast = index === nodes.length - 1\n      if (isFirst) return null\n      const prevNode = nodes[index - 1]\n      const edge = resolveEdgeForNodes(graph, prevNode.id, node.id) || {\n        from: prevNode.id,\n        to: node.id,\n        kind: '',\n        enabled: false,\n      }\n\n      return (\n        <>\n          <NodeCard\n            baseGraph={baseGraph}\n            graph={graph}\n            node={node}\n            retainerRootNode={fromNode}\n            edge={edge}\n            actions={\n              <>\n                <EdgeLinkButton\n                  edge={edge}\n                  onClick={() =>\n                    onAddChange({\n                      change: 'edge',\n                      from: edge.from,\n                      to: edge.to,\n                      enabled: !edge.enabled,\n                    })\n                  }\n                />\n                <Tooltip\n                  title=\"Set as the first node\"\n                  disableFocusListener\n                  enterDelay={500}\n                  placement=\"top\"\n                >\n                  <IconButton onClick={() => onFromNodeSelect(node.id)}>\n                    <Icon>vertical_align_top</Icon>\n                  </IconButton>\n                </Tooltip>\n                {!isLast && (\n                  <Tooltip\n                    title=\"Set as the last node\"\n                    disableFocusListener\n                    enterDelay={500}\n                    placement=\"top\"\n                  >\n                    <IconButton onClick={() => onToNodeSelect(node.id)}>\n                      <Icon>vertical_align_bottom</Icon>\n                    </IconButton>\n                  </Tooltip>\n                )}\n                <IconButton onClick={() => onPinnedToggle(node.id)}>\n                  <Icon>{pinned.indexOf(node.id) >= 0 ? 'star' : 'star_border'}</Icon>\n                </IconButton>\n              </>\n            }\n          />\n        </>\n      )\n    })\n  }\n\n  renderChains = chains => {\n    const {graph, fromNode, toNode, classes} = this.props\n    const {selectedChain} = this.state\n    if (!selectedChain || !fromNode || !toNode) return null\n    return (\n      <ChainsList\n        className={classes.chainsList}\n        graph={graph}\n        fromNode={fromNode}\n        toNode={toNode}\n        chains={chains}\n        selectedChain={selectedChain}\n        onChainSelect={chain => this.setState({selectedChain: chain})}\n      />\n    )\n  }\n\n  render() {\n    const {\n      className,\n      classes,\n      baseGraph,\n      graph,\n      fromNode,\n      toNode,\n      pinned,\n      onPinnedToggle,\n      onToNodeSelect,\n    } = this.props\n    const chainsPromise = this.chainsPromiseSelector(this.props)\n\n    return (\n      <div className={classNames(className, classes.root)}>\n        <div className={classes.chains}>\n          <Typography variant=\"headline\">Dependency chains</Typography>\n          <Typography variant=\"subheading\" gutterBottom>\n            Select one of the dependency chains between these two nodes. Try breaking the links\n            between them to see the impact of your changes.\n          </Typography>\n          <Async\n            promise={chainsPromise}\n            then={chains => this.renderChains(chains)}\n            catch={error => <ErrorBox>{error}</ErrorBox>}\n            pending={<LinearProgress className={classes.listProgress} />}\n          />\n        </div>\n        <div className={classes.selectedChain}>\n          {fromNode && (\n            <NodeCard\n              baseGraph={baseGraph}\n              graph={graph}\n              node={fromNode}\n              actions={\n                <>\n                  {fromNode !== toNode && (\n                    <Tooltip\n                      title=\"Set as the last node\"\n                      disableFocusListener\n                      enterDelay={500}\n                      placement=\"top\"\n                    >\n                      <IconButton onClick={() => onToNodeSelect(fromNode.id)}>\n                        <Icon>vertical_align_bottom</Icon>\n                      </IconButton>\n                    </Tooltip>\n                  )}\n                  <IconButton onClick={() => onPinnedToggle(fromNode.id)}>\n                    <Icon>{pinned.indexOf(fromNode.id) >= 0 ? 'star' : 'star_border'}</Icon>\n                  </IconButton>\n                </>\n              }\n            />\n          )}\n          <div className={classes.selectedChainScroll}>{this.renderSelectedChain()}</div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(ChainsExplorer)\n","// @flow\n\nimport * as React from 'react'\nimport {withStyles, Icon} from '@material-ui/core'\nimport orange from '@material-ui/core/colors/amber'\n\ntype Props = {|\n  children: React.Node,\n  classes: Object,\n|}\n\nconst styles = theme => ({\n  root: {\n    background: orange.A700,\n    padding: '8px 24px 8px 24px',\n    display: 'flex',\n    alignItems: 'center',\n    flexShrink: 0,\n    justifyContent: 'center',\n  },\n  icon: {\n    'margin-right': 8,\n  },\n})\n\nconst WarningBar = ({classes, children}: Props) => (\n  <div className={classes.root}>\n    <Icon className={classes.icon}>warning</Icon>\n    <span className={classes.label}>{children}</span>\n  </div>\n)\n\nexport default withStyles(styles)(WarningBar)\n","// @flow\n\nimport * as React from 'react'\nimport {withStyles, Icon} from '@material-ui/core'\n\ntype Props = {|\n  children: React.Node,\n  classes: Object,\n|}\n\nconst styles = theme => ({\n  root: {\n    background: theme.palette.error.dark,\n    color: theme.palette.error.contrastText,\n    padding: '8px 24px 8px 24px',\n    display: 'flex',\n    alignItems: 'center',\n    flexShrink: 0,\n    justifyContent: 'center',\n  },\n  icon: {\n    'margin-right': 8,\n  },\n})\n\nconst ErrorBar = ({classes, children}: Props) => (\n  <div className={classes.root}>\n    <Icon className={classes.icon}>error</Icon>\n    <span className={classes.label}>{children}</span>\n  </div>\n)\n\nexport default withStyles(styles)(ErrorBar)\n","// @flow\n\nimport type {Graph, NodeID} from '../../analysis/graph'\nimport type {Change} from '../../analysis/changes'\n\nimport * as React from 'react'\nimport {without} from 'lodash'\nimport {CopyToClipboard} from 'react-copy-to-clipboard'\nimport {\n  withStyles,\n  IconButton,\n  Icon,\n  List,\n  Toolbar,\n  Button,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n} from '@material-ui/core'\nimport {resolveEdgeForNodes, getNode} from '../../analysis/graph'\nimport EmptyBox from '../EmptyBox'\nimport {encodeUrlStateHash, decodeUrlStateHash} from '../../history'\n\ntype Props = {|\n  graph: Graph,\n  changes: $ReadOnlyArray<Change>,\n  pinned: $ReadOnlyArray<NodeID>,\n  onChangesUpdate: ($ReadOnlyArray<Change>) => void,\n  classes: Object,\n|}\n\nconst styles = theme => ({\n  root: {},\n  list: {\n    maxHeight: '70vh',\n    overflowY: 'auto',\n  },\n  delete: {},\n})\n\nclass ChangesView extends React.PureComponent<Props> {\n  render() {\n    const {classes, graph, changes, pinned, onChangesUpdate} = this.props\n    const textsToCopy = []\n    // Generate new url with pins and most current changes\n    const {origin, pathname, hash} = window.location\n    const currentUrlState = decodeUrlStateHash(hash.slice(1))\n    const shareUrl = `${origin}${pathname}#${encodeUrlStateHash({\n      ...currentUrlState,\n      changes,\n      pinned,\n    })}`\n    textsToCopy.push(shareUrl)\n    return (\n      <div>\n        <List className={classes.list}>\n          {changes\n            .map((change, index) => {\n              const edge = resolveEdgeForNodes(graph, change.from, change.to)\n              if (!edge) return null\n              const fromNode = getNode(graph, edge.from)\n              const toNode = getNode(graph, edge.to)\n              const fromName = fromNode.file || fromNode.name || fromNode.id\n              const toName = edge.name || toNode.name || toNode.id\n              textsToCopy.push(\n                edge.enabled\n                  ? `In \"${fromName}\" add \"${toName}\"`\n                  : `In \"${fromName}\" remove \"${toName}\"`,\n              )\n              return (\n                <ListItem key={index} graph={graph} change={change}>\n                  <IconButton\n                    aria-label=\"Delete\"\n                    className={classes.delete}\n                    onClick={() => onChangesUpdate(without(changes, change))}\n                  >\n                    <Icon>delete</Icon>\n                  </IconButton>\n                  <ListItemText\n                    primary={\n                      edge.enabled ? (\n                        <>\n                          In \"<b>{fromName}</b>\" add \"<b>{toName}</b>\"\n                        </>\n                      ) : (\n                        <>\n                          In \"<b>{fromName}</b>\" remove \"<b>{toName}</b>\"\n                        </>\n                      )\n                    }\n                  />\n                  <ListItemSecondaryAction />\n                </ListItem>\n              )\n            })\n            .reverse()}\n          {changes.length === 0 && (\n            <EmptyBox icon={<Icon>block</Icon>}>\n              No changes applied. Try breaking links between dependencies\n            </EmptyBox>\n          )}\n        </List>\n        <Toolbar>\n          <Button onClick={() => onChangesUpdate([])}>Reset changes</Button>\n          {textsToCopy.length > 0 ? (\n            <CopyToClipboard text={textsToCopy.join('\\n\\n')}>\n              <Button>Copy changes to clipboard</Button>\n            </CopyToClipboard>\n          ) : null}\n          <CopyToClipboard text={shareUrl}>\n            <Button>Copy URL to clipboard</Button>\n          </CopyToClipboard>\n        </Toolbar>\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(ChangesView)\n","// @flow\nimport type {Graph, Node, NodeID} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport {withStyles, ListItem, ListItemText} from '@material-ui/core'\nimport NodeSize from './NodeSize'\nimport NodeName from './NodeName'\n\nexport type Props = {|\n  baseGraph: Graph,\n  graph: Graph,\n  checked?: boolean,\n  node: Node,\n  hidePackage?: boolean,\n  retainerRootNode?: ?Node,\n  children?: React.Node,\n  selectFromNode?: (node: NodeID) => void,\n  selectToNode?: (node: NodeID) => void,\n  onClick?: () => void,\n  style?: Object,\n  classes: Object,\n  className?: string,\n|}\n\nconst styles = theme => ({\n  root: {\n    // paddingLeft: 16,\n  },\n})\n\nfunction NodeItem({\n  baseGraph,\n  graph,\n  checked,\n  onClick,\n  node,\n  retainerRootNode,\n  selectFromNode,\n  selectToNode,\n  selectNode,\n  hidePackage,\n  style,\n  children,\n  classes,\n  className,\n}: Props) {\n  // {selectFromNode && <a onClick={() => selectFromNode(node.id)}>From</a>}\n  // {selectToNode && <a onClick={() => selectToNode(node.id)}>To</a>}\n\n  return (\n    <div style={style}>\n      <ListItem\n        dense\n        disableGutters\n        ContainerComponent=\"div\"\n        button={!!onClick}\n        onClick={onClick}\n        className={classNames(className, classes.root)}\n      >\n        <ListItemText\n          primary={<NodeName node={node} hidePackage={hidePackage} tooltip />}\n          primaryTypographyProps={{noWrap: true, color: checked ? 'secondary' : 'default'}}\n          secondary={\n            <NodeSize\n              baseGraph={baseGraph}\n              graph={graph}\n              node={node}\n              retainerRootNode={retainerRootNode}\n            />\n          }\n        />\n        {children}\n      </ListItem>\n    </div>\n  )\n}\nexport default withStyles(styles)(NodeItem)\n","// @flow\n\ntype TreeState = {\n  expanded: $ReadOnlyArray<any>,\n}\n\ntype TreeOptions = {\n  getChildren?: any => $ReadOnlyArray<any>,\n  getKey?: any => any,\n}\n\nconst defaultGetChildren = row => row.children\nconst defaultGetKey = row => row\n\nexport function isTreeExpanded(state: TreeState, row: any, options?: TreeOptions = {}): boolean {\n  const {getKey = defaultGetKey} = options\n  return state.expanded.indexOf(getKey(row)) >= 0\n}\n\n// Flattens a tree of items into a flat set of rows, which can be then used in any list rendering lib\nexport function flattenTreeToRows(\n  tree: any,\n  state: TreeState,\n  options?: TreeOptions = {},\n): $ReadOnlyArray<any> {\n  const result = []\n  const {getChildren = defaultGetChildren} = options\n  for (const row of tree) {\n    result.push(row)\n    if (isTreeExpanded(state, row, options)) {\n      const children = getChildren(row)\n      result.push(...flattenTreeToRows(children, state, options))\n    }\n  }\n  return result\n}\n\nexport function toggleTreeRow(\n  state: TreeState,\n  row: any,\n  options?: TreeOptions = {},\n  expand?: boolean,\n): TreeState {\n  const current = isTreeExpanded(state, row, options)\n  if (expand == null) {\n    expand = !current\n  }\n  if (expand === current) return state\n  const {getKey = defaultGetKey} = options\n  const key = getKey(row)\n  if (expand) {\n    return {...state, expanded: [...state.expanded, key]}\n  } else {\n    return {...state, expanded: state.expanded.filter(e => e !== key)}\n  }\n}\n\nexport const toggleTreeRowState = (row: any, options?: TreeOptions = {}) => (state: TreeState) =>\n  toggleTreeRow(state, row, options)\n","// @flow\n\nimport numeral from 'numeral'\n\nimport * as React from 'react'\nimport Fuse from 'fuse.js'\nimport {groupBy, orderBy, map, sortBy, sumBy} from 'lodash'\n\nimport {List, AutoSizer} from 'react-virtualized'\nimport {\n  withStyles,\n  Input,\n  InputAdornment,\n  IconButton,\n  Icon,\n  ListItem,\n  ListItemText,\n  LinearProgress,\n} from '@material-ui/core'\nimport classNames from 'classnames'\nimport {createSelector} from 'reselect'\n\nimport type {Node, Graph, NodeID} from '../../analysis/graph'\nimport {flattenTreeToRows, toggleTreeRowState, isTreeExpanded} from '../tree'\nimport {getPackageName} from '../../analysis/info'\n\nexport type Props = {|\n  baseGraph: Graph,\n  graph: Graph,\n  nodes: $ReadOnlyArray<Node>,\n  renderItem: any => React.Node,\n  renderEmpty: any => React.Node,\n  search?: string,\n  selected?: ?Node,\n  pinned: $ReadOnlyArray<NodeID>,\n  groupNodesBy?: '' | 'package',\n  orderNodesBy?: [any[], string[]],\n  orderGroupsBy?: [any[], string[]],\n  loading?: boolean,\n  classes: Object,\n  className?: string,\n|}\n\ntype State = {\n  search: string,\n  expanded: $ReadOnlyArray<any>,\n}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'stretch',\n  },\n  search: {},\n  listContainer: {\n    flexGrow: 1,\n    position: 'relative',\n  },\n  list: {\n    outline: 0,\n  },\n})\n\nconst treeOptions = {getKey: group => group.name}\n\nclass NodeList extends React.PureComponent<Props, State> {\n  state = {\n    search: '',\n    expanded: [],\n  }\n  fuseSelector = createSelector(\n    (_, p) => p.nodes,\n    nodes => {\n      return new Fuse(nodes, {\n        keys: ['name', 'id', 'kind'],\n        tokenize: true,\n        matchAllTokens: true,\n      })\n    },\n  )\n  searchSelector = createSelector(\n    this.fuseSelector,\n    s => s.search,\n    (_, p) => p.orderNodesBy,\n    (fuse, search, orderNodesBy) => {\n      const nodes = search ? fuse.search(search) : fuse.list\n      if (orderNodesBy) {\n        return orderBy(nodes, ...orderNodesBy)\n      }\n      return nodes\n    },\n  )\n  pinnedSelector = createSelector(\n    this.searchSelector,\n    (_, p) => p.pinned,\n    (nodes, pinned) => {\n      return nodes.filter(node => pinned.indexOf(node.id) >= 0)\n    },\n  )\n  groupSelector = createSelector(\n    this.searchSelector,\n    this.pinnedSelector,\n    (_, p) => p.groupNodesBy,\n    (_, p) => p.orderGroupsBy,\n    (nodes, pinned, groupNodesBy, orderGroupsBy) => {\n      let rows\n      if (groupNodesBy === 'package') {\n        const groups = groupBy(nodes, node => {\n          if (node.kind === 'module') {\n            return getPackageName(node) || '(root modules)'\n          }\n          return `(${node.kind}s)`\n        })\n        rows = map(groups, (children, name) => ({\n          name,\n          children: sortBy(children, 'file'),\n          size: sumBy(children, 'size'),\n          group: true,\n        }))\n        rows = orderBy(rows, ...orderGroupsBy)\n      } else {\n        rows = nodes.slice()\n      }\n      rows.unshift(...pinned)\n      return rows\n    },\n  )\n  nodesSelector = createSelector(\n    this.groupSelector,\n    s => s.expanded,\n    (tree, expanded) => {\n      return flattenTreeToRows(tree, {expanded}, treeOptions)\n    },\n  )\n\n  renderList() {\n    const {classes, baseGraph, graph, groupNodesBy, renderItem, renderEmpty} = this.props\n    // $FlowFixMe\n    const nodes = this.nodesSelector(this.state, this.props)\n\n    return (\n      <div className={classes.listContainer}>\n        <AutoSizer>\n          {({width, height}) => (\n            <List\n              className={classes.list}\n              width={width}\n              height={height}\n              rowCount={nodes.length}\n              rowHeight={54}\n              rowRenderer={({index, style}) => {\n                const node = nodes[index]\n                if (node.group) {\n                  return (\n                    <ListItem\n                      dense\n                      ContainerComponent=\"div\"\n                      button\n                      onClick={() => this.setState(toggleTreeRowState(node, treeOptions))}\n                      disableGutters\n                      style={style}\n                      key={index}\n                      divider\n                    >\n                      <ListItemText\n                        primary={node.name}\n                        secondary={`${numeral(node.size).format('0.0b')} in ${\n                          node.children.length\n                        }`}\n                      />\n                      <Icon>\n                        {isTreeExpanded(this.state, node, treeOptions)\n                          ? 'expand_less'\n                          : 'expand_more'}\n                      </Icon>\n                    </ListItem>\n                  )\n                }\n                return renderItem({\n                  node,\n                  key: index,\n                  baseGraph,\n                  graph,\n                  hidePackage: Boolean(groupNodesBy),\n                  style,\n                })\n              }}\n              noRowsRenderer={renderEmpty}\n            />\n          )}\n        </AutoSizer>\n      </div>\n    )\n  }\n\n  render() {\n    const {classes, className, loading} = this.props\n    const {search} = this.state\n    return (\n      <div className={classNames(className, classes.root)}>\n        <Input\n          className={classes.search}\n          id=\"adornment-password\"\n          type=\"text\"\n          value={search}\n          onChange={el => this.setState({search: el.target.value})}\n          endAdornment={\n            search && (\n              <InputAdornment position=\"end\">\n                <IconButton\n                  color=\"inherit\"\n                  aria-label=\"Clear search\"\n                  onClick={() => this.setState({search: ''})}\n                >\n                  <Icon color=\"inherit\">clear</Icon>\n                </IconButton>\n              </InputAdornment>\n            )\n          }\n          placeholder=\"Search\"\n        />\n        {loading ? <LinearProgress className={classes.listProgress} /> : this.renderList()}\n      </div>\n    )\n  }\n}\n//scrollToIndex={scrollToIndex >= 0 ? scrollToIndex : null}\nexport default withStyles(styles)(NodeList)\n","// @flow\n\nimport type {Graph, Node, NodeID} from '../../analysis/graph'\nimport type {Props as NodeListProps} from './NodeList'\nimport type {Props as NodeItemProps} from './NodeItem'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport {map} from 'lodash'\nimport {createSelector} from 'reselect'\nimport Async from 'react-promise'\nimport {\n  withStyles,\n  Icon,\n  Typography,\n  Menu,\n  MenuItem,\n  ListItem,\n  ListItemText,\n  ListItemSecondaryAction,\n} from '@material-ui/core'\n\nimport EmptyBox from '../EmptyBox'\nimport NodeItem from './NodeItem'\nimport NodeList from './NodeList'\n\ntype Mode = {\n  getNodes: () => $ReadOnlyArray<Node> | Promise<$ReadOnlyArray<Node>>,\n  renderTitle: () => React.Node,\n  renderInfo: () => React.Node,\n  renderEmpty: () => string,\n  listProps?: () => $Shape<NodeListProps>,\n  itemProps?: Object => $Shape<NodeItemProps>,\n}\n\nexport type Props = {|\n  baseGraph: Graph,\n  graph: Graph,\n  pinned: $ReadOnlyArray<NodeID>,\n  selected: ?Node,\n  retainerRootNode?: ?Node,\n  modes: {\n    [string]: Mode,\n  },\n  defaultMode: string,\n  onNodeSelect: NodeID => void,\n  classes: Object,\n  className?: string,\n|}\n\ntype State = {|\n  modeId: ?string,\n  modeMenuAnchor: any,\n|}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    position: 'relative',\n    flexDirection: 'column',\n    justifyContent: 'stretch',\n  },\n  list: {\n    flexGrow: 1,\n  },\n  listProgress: {\n    marginTop: 16,\n  },\n  modeMenuItem: {\n    width: 300,\n  },\n})\n\nclass GraphExplorer extends React.Component<Props, State> {\n  state = {modeId: null, modeMenuAnchor: null}\n\n  modeSelector = (s, p) => p.modes[s.modeId || ''] || p.modes[p.defaultMode]\n  nodesSelector = (s, p) => this.modeSelector(s, p).getNodes()\n\n  nodesPromiseSelector = createSelector(\n    this.nodesSelector,\n    // Needed so we don't recreate the promise on every render\n    nodes => Promise.resolve(nodes),\n  )\n\n  static getDerivedStateFromProps({modes = {}}, state = {}) {\n    if (!modes[state.modeId]) {\n      // If selected mode is not available anymore, switch to default\n      return {modeId: null}\n    }\n    return null\n  }\n\n  handleModeMenuOpen = event => {\n    this.setState({modeMenuAnchor: event.currentTarget})\n  }\n  handleModeMenuClose = () => {\n    this.setState({modeMenuAnchor: null})\n  }\n\n  renderList(nodes) {\n    const {classes, baseGraph, graph, retainerRootNode, selected, pinned, onNodeSelect} = this.props\n    const mode = this.modeSelector(this.state, this.props)\n    const listProps = mode.listProps ? mode.listProps() : {}\n    return (\n      <NodeList\n        className={classes.list}\n        nodes={nodes || []}\n        loading={nodes == null}\n        baseGraph={baseGraph}\n        graph={graph}\n        pinned={pinned}\n        selected={selected}\n        groupNodesBy=\"package\"\n        orderNodesBy={undefined}\n        orderGroupsBy={[['size'], ['desc']]}\n        renderItem={itemProps => (\n          <NodeItem\n            {...itemProps}\n            retainerRootNode={retainerRootNode}\n            onClick={() => onNodeSelect(itemProps.node.id)}\n            checked={selected ? selected.id === itemProps.node.id : false}\n            {...mode.itemProps && mode.itemProps(itemProps)}\n          >\n            {pinned.indexOf(itemProps.node.id) >= 0 ? (\n              <ListItemSecondaryAction>\n                <Icon color=\"disabled\" fontSize=\"inherit\">\n                  star\n                </Icon>\n              </ListItemSecondaryAction>\n            ) : null}\n          </NodeItem>\n        )}\n        renderEmpty={() => <EmptyBox icon={<Icon>block</Icon>}>{mode.renderEmpty()}</EmptyBox>}\n        {...listProps}\n      />\n    )\n  }\n\n  renderModeMenu() {\n    const {classes, modes, defaultMode} = this.props\n    const {modeMenuAnchor, modeId} = this.state\n    const currentModeId = modeId || defaultMode\n    return (\n      <Menu\n        id=\"lock-menu\"\n        anchorEl={modeMenuAnchor}\n        open={Boolean(modeMenuAnchor)}\n        onClose={this.handleModeMenuClose}\n      >\n        {map(modes, (mode: Mode, id) => (\n          <MenuItem\n            className={classes.modeMenuItem}\n            key={id}\n            selected={id === currentModeId}\n            onClick={() => this.setState({modeId: id, modeMenuAnchor: null})}\n          >\n            {mode.renderTitle()}\n          </MenuItem>\n        ))}\n      </Menu>\n    )\n  }\n\n  render() {\n    const {className, classes} = this.props\n\n    const mode = this.modeSelector(this.state, this.props)\n    const nodesPromise = this.nodesPromiseSelector(this.state, this.props)\n\n    return (\n      <div className={classNames(className, classes.root)}>\n        <ListItem\n          button\n          disableGutters\n          className={classes.header}\n          onClick={this.handleModeMenuOpen}\n        >\n          <ListItemText>\n            <Typography variant=\"headline\">{mode.renderTitle()}</Typography>\n            <Typography variant=\"subheading\" gutterBottom>\n              {mode.renderInfo()}\n            </Typography>\n          </ListItemText>\n          <Icon color=\"action\" className={classes.headerMore}>\n            more_vert\n          </Icon>\n        </ListItem>\n        {this.renderModeMenu()}\n        <Async\n          promise={nodesPromise}\n          then={nodes => this.renderList(nodes)}\n          pending={() => this.renderList(null)}\n        />\n      </div>\n    )\n  }\n}\n\nexport default withStyles(styles)(GraphExplorer)\n","// @flow\n\nimport type {Node, NodeID, Graph} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport {createSelector} from 'reselect'\nimport {withStyles} from '@material-ui/core'\n\nimport {getNodes, getAllNodes} from '../../analysis/graph'\nimport GraphExplorer from './GraphExplorer'\nimport NodeName from './NodeName'\nimport {\n  getDeepNodeParents,\n  keepOnlyEntryModules,\n  keepOnlyLeafModules,\n} from '../../analysis/dependencies'\nimport {calculateTreeSize} from '../../analysis/size'\n\ntype Props = {|\n  baseGraph: Graph,\n  graph: Graph,\n  fromNode: ?Node,\n  pinned: $ReadOnlyArray<NodeID>,\n  toNode: ?Node,\n  onNodeSelect: NodeID => void,\n\n  className?: string,\n  classes: Object,\n|}\n\nconst styles = {\n  root: {},\n}\n\nconst prepareEntryNodes = async (graph, nodes) => {\n  nodes = keepOnlyEntryModules(graph, nodes)\n  nodes = await Promise.all(\n    nodes.map(async node => ({\n      ...node,\n      treeSize: await calculateTreeSize(graph, node),\n    })),\n  )\n  return nodes\n}\n\nclass ParentsExplorer extends React.PureComponent<Props> {\n  allNodesSelector = createSelector((_, p) => p.graph, graph => getAllNodes(graph))\n  getAllNodes = () => this.allNodesSelector(this.state, this.props)\n\n  entryNodesSelector = createSelector(\n    (_, p) => p.graph,\n    graph => prepareEntryNodes(graph, getAllNodes(graph)),\n  )\n  getEntryNodes = () => this.entryNodesSelector(this.state, this.props)\n\n  leafNodesSelector = createSelector(\n    (_, p) => p.graph,\n    graph => keepOnlyLeafModules(graph, getAllNodes(graph)),\n  )\n  getLeafNodes = () => this.leafNodesSelector(this.state, this.props)\n\n  directParentNodesSelector = createSelector(\n    (_, p) => p.graph,\n    (_, p) => p.fromNode,\n    (graph, fromNode) => {\n      if (!fromNode) return []\n      return getNodes(graph, fromNode.parents)\n    },\n  )\n  getDirectParentNodes = () => this.directParentNodesSelector(this.state, this.props)\n\n  parentNodesSelector = createSelector(\n    (_, p) => p.graph,\n    (_, p) => p.toNode,\n    (graph, toNode) => {\n      if (!toNode) return []\n      return getDeepNodeParents(graph, toNode).then(ids => getNodes(graph, ids))\n    },\n  )\n  getParentNodes = () => this.parentNodesSelector(this.state, this.props)\n\n  parentEntryNodesSelector = createSelector(\n    (_, p) => p.graph,\n    this.parentNodesSelector,\n    async (graph, nodes) => {\n      return prepareEntryNodes(graph, await nodes)\n    },\n  )\n  getParentEntryNodes = () => this.parentEntryNodesSelector(this.state, this.props)\n\n  modes = {\n    all: {\n      getNodes: this.getAllNodes,\n      renderTitle: () => 'All Nodes',\n      renderInfo: () => 'Select node to start from',\n      renderEmpty: () => 'Nothing found',\n    },\n    directParents: {\n      getNodes: this.getDirectParentNodes,\n      renderTitle: () => 'Direct Parents',\n      renderInfo: () => {\n        const {fromNode} = this.props\n        if (!fromNode) return null\n        return (\n          <>\n            Move up to direct parents of <NodeName node={fromNode} />\n          </>\n        )\n      },\n      renderEmpty: () => 'No parents found',\n    },\n    parents: {\n      getNodes: this.getParentNodes,\n      renderTitle: () => 'All Parents',\n      renderInfo: () => {\n        const {toNode} = this.props\n        if (!toNode) return null\n        return (\n          <>\n            Move up to parents of <NodeName node={toNode} />\n          </>\n        )\n      },\n      renderEmpty: () => 'No parents found',\n    },\n    parentEntries: {\n      getNodes: this.getParentEntryNodes,\n      renderTitle: () => 'Parent Entry Points',\n      renderInfo: () => {\n        const {toNode} = this.props\n        if (!toNode) return null\n        return (\n          <>\n            Move up to parent entries of <NodeName node={toNode} />\n          </>\n        )\n      },\n      renderEmpty: () => 'No entries found',\n      listProps: () => ({\n        groupNodesBy: '',\n        orderNodesBy: [['treeSize'], ['desc']],\n      }),\n    },\n    entries: {\n      getNodes: this.getEntryNodes,\n      renderTitle: () => 'Entry Modules',\n      renderInfo: () => 'Select entry module to start from',\n      renderEmpty: () => 'No modules found',\n      listProps: () => ({\n        groupNodesBy: '',\n        orderNodesBy: [['treeSize'], ['desc']],\n      }),\n    },\n  }\n\n  initialModes = {\n    initialAll: this.modes.all,\n    initialEntries: this.modes.entries,\n    initialLeafs: {\n      getNodes: this.getLeafNodes,\n      renderTitle: () => 'Leaf Modules',\n      renderInfo: () => 'Select modules without children',\n      renderEmpty: () => 'No modules found',\n    },\n  }\n\n  render() {\n    // const {} = this.state\n    const {\n      classes,\n      className,\n      fromNode,\n      toNode,\n      baseGraph,\n      graph,\n      pinned,\n      onNodeSelect,\n    } = this.props\n\n    return (\n      <GraphExplorer\n        className={classNames(classes.root, className)}\n        modes={fromNode && toNode ? this.modes : this.initialModes}\n        defaultMode={fromNode && toNode ? 'parents' : 'initialAll'}\n        baseGraph={baseGraph}\n        graph={graph}\n        pinned={pinned}\n        onNodeSelect={onNodeSelect}\n        selected={fromNode}\n      />\n    )\n  }\n}\n\nexport default withStyles(styles)(ParentsExplorer)\n","// @flow\n\nimport type {Node, NodeID, Graph} from '../../analysis/graph'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport {without} from 'lodash'\nimport {createSelector} from 'reselect'\nimport {withStyles} from '@material-ui/core'\n\nimport {getNodes, getAllNodes} from '../../analysis/graph'\nimport GraphExplorer from './GraphExplorer'\nimport NodeName from './NodeName'\nimport {\n  keepOnlyLeafModules,\n  getDeepNodeChildren,\n  getRetainedNodes,\n  getDisabledLeafChildren,\n} from '../../analysis/dependencies'\nimport {calculateRetainedTreeSize} from '../../analysis/size'\n\ntype Props = {|\n  baseGraph: Graph,\n  graph: Graph,\n  pinned: $ReadOnlyArray<NodeID>,\n  fromNode: ?Node,\n  toNode: ?Node,\n  onNodeSelect: NodeID => void,\n\n  className?: string,\n  classes: Object,\n|}\n\nconst styles = {\n  root: {},\n}\n\nclass ChildrenExplorer extends React.PureComponent<Props> {\n  allNodesSelector = createSelector((_, p) => p.graph, graph => getAllNodes(graph))\n  getAllNodes = () => this.allNodesSelector(this.state, this.props)\n\n  leafNodesSelector = createSelector(\n    (_, p) => p.graph,\n    graph => keepOnlyLeafModules(graph, getAllNodes(graph)),\n  )\n  getLeafNodes = () => this.leafNodesSelector(this.state, this.props)\n\n  directChildrenNodesSelector = createSelector(\n    (_, p) => p.graph,\n    (_, p) => p.fromNode,\n    (_, p) => p.toNode,\n    async (graph, fromNode, toNode) => {\n      if (!fromNode || !toNode) return []\n      let nodes = await getNodes(graph, toNode.children)\n      nodes = await Promise.all(\n        nodes.map(async node => ({\n          ...node,\n          treeSize: await calculateRetainedTreeSize(graph, fromNode, node),\n        })),\n      )\n      return nodes\n    },\n  )\n  getDirectChildrenNodes = () => this.directChildrenNodesSelector(this.state, this.props)\n\n  retainedChildrenNodesSelector = createSelector(\n    (_, p) => p.graph,\n    (_, p) => p.fromNode,\n    (_, p) => p.toNode,\n    (graph, fromNode, toNode) => {\n      if (!fromNode || !toNode) return []\n      if (fromNode === toNode) return this.getChildrenNodes()\n      return getRetainedNodes(graph, fromNode, toNode).then(ids =>\n        getNodes(graph, without(ids, toNode.id)),\n      )\n    },\n  )\n  getRetainedChildrenNodes = () => this.retainedChildrenNodesSelector(this.state, this.props)\n\n  childrenNodesSelector = createSelector(\n    (_, p) => p.graph,\n    (_, p) => p.fromNode,\n    (graph, fromNode) => {\n      if (!fromNode) return []\n      return getDeepNodeChildren(graph, fromNode).then(ids => getNodes(graph, ids))\n    },\n  )\n  getChildrenNodes = () => this.childrenNodesSelector(this.state, this.props)\n\n  childAsyncNodesSelector = createSelector(\n    (_, p) => p.graph,\n    (_, p) => p.fromNode,\n    (graph, fromNode) => {\n      if (!fromNode) return []\n      return getDisabledLeafChildren(graph, fromNode).then(ids => getNodes(graph, ids))\n    },\n  )\n  getChildAsyncNodes = () => this.childAsyncNodesSelector(this.state, this.props)\n\n  childLeafNodesSelector = createSelector(\n    (_, p) => p.graph,\n    this.childrenNodesSelector,\n    async (graph, nodes) => {\n      return keepOnlyLeafModules(graph, await nodes)\n    },\n  )\n  getChildLeafNodes = () => this.childLeafNodesSelector(this.state, this.props)\n\n  modes = {\n    all: {\n      getNodes: this.getAllNodes,\n      renderTitle: () => 'All Nodes',\n      renderInfo: () => 'Select node to start from',\n      renderEmpty: () => 'Nothing found',\n    },\n    children: {\n      getNodes: this.getChildrenNodes,\n      renderTitle: () => 'All Children',\n      renderInfo: () => {\n        const {fromNode} = this.props\n        if (!fromNode) return null\n        return (\n          <>\n            Move down to children of <NodeName node={fromNode} />\n          </>\n        )\n      },\n      renderEmpty: () => 'No children found',\n    },\n    retainedChildren: {\n      getNodes: this.getRetainedChildrenNodes,\n      renderTitle: () => 'Retained Children',\n      renderInfo: () => {\n        const {toNode} = this.props\n        if (!toNode) return null\n        return (\n          <>\n            Move down to children retained by <NodeName node={toNode} />\n          </>\n        )\n      },\n      renderEmpty: () => 'No children found',\n    },\n    directChildren: {\n      getNodes: this.getDirectChildrenNodes,\n      renderTitle: () => 'Direct Children',\n      renderInfo: () => {\n        const {toNode} = this.props\n        if (!toNode) return null\n        return (\n          <>\n            Move down to direct children of <NodeName node={toNode} />\n          </>\n        )\n      },\n      renderEmpty: () => 'No children found',\n      listProps: () => ({\n        groupNodesBy: '',\n        orderNodesBy: [['treeSize'], ['desc']],\n      }),\n    },\n    asyncLeafs: {\n      getNodes: this.getChildAsyncNodes,\n      renderTitle: () => 'Child Async Modules',\n      renderInfo: () => {\n        const {fromNode} = this.props\n        if (!fromNode) return null\n        return (\n          <>\n            Move down to child async modules of <NodeName node={fromNode} />\n          </>\n        )\n      },\n      renderEmpty: () => 'No modules found',\n      listProps: () => ({\n        groupNodesBy: '',\n        orderNodesBy: [['name'], ['asc']],\n      }),\n      itemProps: () => ({\n        retainerRootNode: null,\n      }),\n    },\n    childLeafs: {\n      getNodes: this.getChildLeafNodes,\n      renderTitle: () => 'Child Leaf Modules',\n      renderInfo: () => {\n        const {fromNode} = this.props\n        if (!fromNode) return null\n        return (\n          <>\n            Move down to child leaf modules of <NodeName node={fromNode} />\n          </>\n        )\n      },\n      renderEmpty: () => 'No modules found',\n    },\n    leafs: {\n      getNodes: this.getLeafNodes,\n      renderTitle: () => 'Leaf Modules',\n      renderInfo: () => 'Select leaf module to finish at',\n      renderEmpty: () => 'No modules found',\n    },\n  }\n\n  render() {\n    const {\n      classes,\n      className,\n      fromNode,\n      toNode,\n      baseGraph,\n      graph,\n      pinned,\n      onNodeSelect,\n    } = this.props\n\n    return (\n      <GraphExplorer\n        className={classNames(classes.root, className)}\n        modes={this.modes}\n        defaultMode={'children'}\n        baseGraph={baseGraph}\n        graph={graph}\n        pinned={pinned}\n        onNodeSelect={onNodeSelect}\n        selected={toNode}\n        retainerRootNode={fromNode}\n      />\n    )\n  }\n}\n\nexport default withStyles(styles)(ChildrenExplorer)\n","// @flow\n\nimport type {NodeID, Node, Graph} from './analysis/graph'\nimport type {Change} from './analysis/changes'\n\nimport * as React from 'react'\nimport classNames from 'classnames'\nimport LinearProgress from '@material-ui/core/LinearProgress'\nimport Dropzone from 'react-dropzone'\nimport {\n  AppBar,\n  Typography,\n  Toolbar,\n  CssBaseline,\n  withStyles,\n  Button,\n  Drawer,\n  Icon,\n} from '@material-ui/core'\n\nimport ChainsExplorer from './ui/graph/ChainsExplorer'\nimport WarningBar from './ui/WarningBar'\nimport ErrorBar from './ui/ErrorBar'\nimport ChangesView from './ui/graph/ChangesView'\nimport EmptyBox from './ui/EmptyBox'\nimport ParentsExplorer from './ui/graph/ParentsExplorer'\nimport ChildrenExplorer from './ui/graph/ChildrenExplorer'\n\ntype Props = {|\n  loading: boolean,\n  baseGraph: ?Graph,\n  graph: ?Graph,\n  error: any,\n\n  fromNode: ?Node,\n  toNode: ?Node,\n  changes: $ReadOnlyArray<Change>,\n  showChanges: boolean,\n  pinned: $ReadOnlyArray<NodeID>,\n\n  onAddChange: Change => any,\n  onFromNodeSelect: NodeID => any,\n  onToNodeSelect: NodeID => any,\n  onNodesSelectionReset: () => any,\n  onChangesUpdate: ($ReadOnlyArray<Change>) => any,\n  onFileDrop: (files: File[], rejectedFiles: File[]) => any,\n  onShowChangesToggle: () => any,\n  onPinnedToggle: NodeID => any,\n  classes: Object,\n|}\n\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n    height: '100vh',\n    minWidth: 1200,\n    flexDirection: 'column',\n    justifyContent: 'stretch',\n    fontFamily: ['Roboto', 'Helvetica', 'Arial', 'sans-serif'],\n  },\n  container: {\n    maxWidth: 2000,\n    minWidth: 1200,\n    width: '100vw',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n  },\n  panes: {\n    display: 'flex',\n    flexDirection: 'row',\n    flexGrow: 1,\n    justifyContent: 'space-between',\n    padding: '24px 24px 0 24px',\n  },\n  parentsExplorer: {\n    width: 250,\n    flexShrink: 0,\n    flexGrow: 0.2,\n    marginRight: 48,\n  },\n  pathsExplorer: {\n    flexShrink: 1,\n    flexGrow: 1,\n    marginRight: 48,\n  },\n  childrenExplorer: {\n    width: 250,\n    flexShrink: 0,\n    flexGrow: 0.2,\n  },\n  title: {\n    marginLeft: 'auto',\n    textTransform: 'uppercase',\n  },\n  search: {\n    color: '#fff',\n    borderBottom: '2px solid #fff',\n    width: 300,\n  },\n  dropzone: {},\n  openButton: {},\n  openFileMessage: {\n    textAlign: 'center',\n    width: '30em',\n    alignSelf: 'center',\n    margin: 'auto',\n    cursor: 'pointer',\n  },\n})\n\nclass AppUI extends React.Component<Props> {\n  dropzone: any\n\n  renderGraph() {\n    const {\n      baseGraph,\n      graph,\n      fromNode,\n      toNode,\n      pinned,\n      classes,\n      onFromNodeSelect,\n      onToNodeSelect,\n      onAddChange,\n      onPinnedToggle,\n    } = this.props\n    if (!graph || !baseGraph) return null\n    return (\n      <div className={classNames(classes.container, classes.panes)}>\n        <ParentsExplorer\n          className={classes.parentsExplorer}\n          baseGraph={baseGraph}\n          graph={graph}\n          pinned={pinned}\n          toNode={toNode}\n          fromNode={fromNode}\n          onNodeSelect={onFromNodeSelect}\n        />\n        {fromNode && toNode ? (\n          <ChainsExplorer\n            className={classes.pathsExplorer}\n            baseGraph={baseGraph}\n            graph={graph}\n            pinned={pinned}\n            fromNode={fromNode}\n            toNode={toNode}\n            onFromNodeSelect={onFromNodeSelect}\n            onToNodeSelect={onToNodeSelect}\n            onAddChange={onAddChange}\n            onPinnedToggle={onPinnedToggle}\n          />\n        ) : null}\n        {fromNode ? (\n          <ChildrenExplorer\n            className={classes.childrenExplorer}\n            baseGraph={baseGraph}\n            graph={graph}\n            pinned={pinned}\n            toNode={toNode}\n            fromNode={fromNode}\n            onNodeSelect={onToNodeSelect}\n          />\n        ) : null}\n      </div>\n    )\n  }\n\n  render() {\n    const {\n      loading,\n      error,\n      graph,\n      showChanges,\n      changes,\n      pinned,\n      fromNode,\n      classes,\n      onNodesSelectionReset,\n      onChangesUpdate,\n      onFileDrop,\n      onShowChangesToggle,\n    } = this.props\n    return (\n      <Dropzone\n        multiple={false}\n        activeClassName=\"\"\n        rejectClassName=\"\"\n        accept=\".json\"\n        onDrop={onFileDrop}\n        className={classes.dropzone}\n        disableClick\n        ref={node => {\n          this.dropzone = node\n        }}\n      >\n        <div className={classes.root}>\n          <CssBaseline />\n          <AppBar position=\"static\">\n            <Toolbar variant=\"regular\" className={classes.container}>\n              {!loading && (\n                <Button color=\"inherit\" onClick={() => this.dropzone.open()}>\n                  Open stats\n                </Button>\n              )}\n              {graph && (\n                <Button color=\"inherit\" onClick={onShowChangesToggle}>\n                  See changes\n                  {changes.length ? ` (${changes.length})` : null}\n                </Button>\n              )}\n              {fromNode && (\n                <Button color=\"inherit\" onClick={onNodesSelectionReset}>\n                  Choose root node\n                </Button>\n              )}\n              <Typography variant=\"title\" color=\"inherit\" className={classes.title}>\n                Webpack Chop Shop\n              </Typography>\n            </Toolbar>\n          </AppBar>\n          {loading && <LinearProgress className={classes.progress} />}\n          {graph &&\n            graph.errors.length > 0 && (\n              <WarningBar>\n                There where {graph.errors.length} errors found. Check the console for more\n              </WarningBar>\n            )}\n          {error && <ErrorBar>{String(error)}</ErrorBar>}\n          {this.renderGraph()}\n          {!graph &&\n            !loading && (\n              <div onClick={() => this.dropzone.open()} className={classes.openFileMessage}>\n                <EmptyBox\n                  icon={\n                    <Icon color=\"inherit\" fontSize=\"default\">\n                      open_in_browser\n                    </Icon>\n                  }\n                >\n                  First,{' '}\n                  <a\n                    href=\"https://webpack.js.org/api/cli/#stats-options\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                  >\n                    generate the stats file in webpack\n                  </a>\n                  , then click here or drop it anywhere on the page to start\n                </EmptyBox>\n              </div>\n            )}\n          {graph && (\n            <Drawer anchor=\"top\" open={showChanges} onClose={onShowChangesToggle}>\n              <div className={classes.container}>\n                <ChangesView\n                  graph={graph}\n                  changes={changes}\n                  pinned={pinned}\n                  onChangesUpdate={onChangesUpdate}\n                />\n              </div>\n            </Drawer>\n          )}\n        </div>\n      </Dropzone>\n    )\n  }\n}\n\nexport default withStyles(styles)(AppUI)\n","// @flow\n\nimport {createGraph, addNode, getNodeId, addEdge} from './graph'\n\nimport type {Graph} from './graph'\n\nexport async function readWebpackStats(\n  stats: Object,\n  options?: {\n    enableAllAsyncImports?: boolean,\n    includeChunks?: boolean,\n  } = {},\n): Promise<Graph> {\n  const graph = createGraph()\n  const {enableAllAsyncImports = false, includeChunks = false} = options\n\n  const {chunks = [], modules = []} = stats\n\n  // create chunks\n  if (includeChunks) {\n    for (const chunk of chunks) {\n      addNode(graph, {\n        id: getNodeId('chunk', chunk.id),\n        originalId: chunk.id,\n        kind: chunk.reason && chunk.reason.indexOf('split chunk') ? 'split-chunk' : 'chunk',\n        name: chunk.names[0],\n        size: 0,\n        original: chunk,\n      })\n      await graph.idle()\n    }\n  }\n\n  // create modules\n  for (const module of modules) {\n    if (module.id == null) {\n      // module has been removed at optimization phase (concatenated, tree-shaken, etc)\n      continue\n    }\n    const isConcat = module.name.indexOf(' + ') > 0\n    const isNamespace = module.name.indexOf(' namespace object') > 0\n    const kind = isConcat ? 'concat' : isNamespace ? 'namespace' : 'module'\n    addNode(graph, {\n      id: getNodeId('module', module.identifier),\n      originalId: module.id,\n      kind,\n      name: module.name,\n      file: isConcat ? undefined : (module.name || '').replace(/^.*!/),\n      size: module.size,\n      original: module,\n    })\n    await graph.idle()\n  }\n\n  // create edges\n  for (const module of modules) {\n    if (includeChunks) {\n      for (const chunkId of module.chunks) {\n        addEdge(graph, {\n          from: getNodeId('chunk', chunkId),\n          to: getNodeId('module', module.id),\n          kind: 'chunk child',\n          original: module,\n        })\n      }\n    }\n    for (const reason of module.reasons) {\n      const type = reason.type || ''\n      if (reason.moduleId == null) {\n        // reason has been removed at optimization phase (concatenated, tree-shaken, etc)\n        continue\n      }\n      const async = type.indexOf('import()') >= 0 && type.indexOf('eager') < 0\n      addEdge(graph, {\n        from: getNodeId('module', reason.moduleIdentifier),\n        to: getNodeId('module', module.identifier),\n        kind: type,\n        name: reason.userRequest,\n        async,\n        enabled: !async || enableAllAsyncImports ? true : false,\n        original: reason,\n      })\n    }\n    await graph.idle()\n  }\n  return graph\n}\n","// @flow\n\nimport type {NodeID, Graph} from './analysis/graph'\nimport type {Change} from './analysis/changes'\n\nimport * as React from 'react'\nimport {hot} from 'react-hot-loader'\nimport {isEqual, pick} from 'lodash'\n\nimport {readWebpackStats} from './analysis/webpack'\nimport {getNode, cloneGraph, abortGraph, resolveNode} from './analysis/graph'\nimport {applyChanges, addChange} from './analysis/changes'\nimport AppUI from './AppUI'\nimport {decodeUrlStateHash, encodeUrlStateHash} from './history'\n\nexport type AppState = {|\n  loading: boolean,\n  baseGraph: ?Graph,\n  graph: ?Graph,\n  error: any,\n\n  fromNodeId: ?NodeID,\n  toNodeId: ?NodeID,\n  changes: $ReadOnlyArray<Change>,\n  showChanges: boolean,\n  pinned: $ReadOnlyArray<NodeID>,\n|}\n\nclass App extends React.Component<{}, AppState> {\n  state = {\n    loading: false,\n    error: null,\n    baseGraph: null,\n    graph: null,\n    fromNodeId: null,\n    toNodeId: null,\n    changes: [],\n    showChanges: false,\n    pinned: [],\n  }\n\n  async componentDidMount() {\n    this.initLocalStorage()\n    this.initHistory()\n    if (process.env.REACT_APP_STATS) {\n      this.openFile(async () => {\n        console.time('loading')\n        const result = await fetch(`./${process.env.REACT_APP_STATS || ''}`)\n        console.timeEnd('loading')\n        console.time('parsing')\n        const json = await result.json()\n        console.timeEnd('parsing')\n        return json\n      })\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const hasNewBaseGraph = prevState.baseGraph !== this.state.baseGraph\n    const hasNewChanges = !isEqual(prevState.changes, this.state.changes)\n    if (hasNewBaseGraph || hasNewChanges) {\n      this.applyChanges()\n    }\n  }\n\n  initLocalStorage() {\n    try {\n      const pinned = JSON.parse(window.localStorage.getItem('pinned') || '[]')\n      const changes = JSON.parse(window.localStorage.getItem('changes') || '[]')\n      this.setState({pinned, changes})\n      window.addEventListener('storage', this.handleStorageEvent)\n    } catch (error) {\n      console.error('Local storage failed to initialize', error)\n    }\n  }\n\n  handleStorageEvent = (event: StorageEvent) => {\n    if (event.key === 'pinned' && event.newValue) {\n      const pinned = JSON.parse(event.newValue)\n      if (pinned !== this.state.pinned) {\n        this.setState({pinned})\n      }\n    }\n  }\n\n  initHistory() {\n    try {\n      window.addEventListener('popstate', this.handleHistoryChange)\n      this.handleHistoryChange()\n    } catch (error) {\n      console.error('History failed to initialize', error)\n    }\n  }\n\n  handleHistoryChange = () => {\n    const hash = (window.location.hash || '#').slice(1)\n    if (!hash) return\n    const hashState = decodeUrlStateHash(hash)\n    this.setState(pick(hashState, ['fromNodeId', 'toNodeId', 'changes', 'pinned']))\n  }\n\n  pushHistory = () => {\n    const {fromNodeId, toNodeId} = this.state\n    const encodedState = encodeUrlStateHash({fromNodeId, toNodeId})\n    window.history.pushState(null, null, `#${encodedState}`)\n  }\n\n  openFile = async callback => {\n    this.setState({\n      loading: true,\n      error: null,\n      baseGraph: null,\n      graph: null,\n    })\n    try {\n      const json = await callback()\n      if (json === null) {\n        this.setState({loading: false})\n        return\n      }\n      console.time('conversion')\n      const graph = await readWebpackStats(json)\n      console.timeEnd('conversion')\n      console.log('Graph: ', graph)\n      console.warn('Errors found: ', graph.errors)\n      this.setState({loading: false, graph, baseGraph: graph})\n    } catch (error) {\n      console.error(error)\n      this.setState({loading: false, error})\n    }\n  }\n\n  handleDrop = ([file], [rejected]) => {\n    if (rejected) {\n      this.setState({error: 'Only webpack build stats in json format are accepted!'})\n      return\n    }\n    this.openFile(\n      () =>\n        new Promise((resolve, reject) => {\n          console.time('loading')\n          const reader = new FileReader()\n          reader.onload = () => {\n            console.timeEnd('loading')\n            console.time('parsing')\n            const json = JSON.parse((reader.result: any))\n            console.timeEnd('parsing')\n            resolve(json)\n          }\n          reader.onerror = () => {\n            console.timeEnd('loading')\n\n            reject('Could not read the file')\n          }\n          reader.readAsBinaryString(file)\n        }),\n    )\n  }\n\n  toggleShowChanges = () => {\n    this.setState({showChanges: !this.state.showChanges})\n  }\n\n  applyChanges = () => {\n    const {baseGraph, graph, changes} = this.state\n    if (!graph || !baseGraph) return\n    const newGraph = cloneGraph(baseGraph)\n    // discard old graph\n    if (graph !== baseGraph) {\n      abortGraph(graph)\n    }\n    applyChanges(newGraph, changes)\n    this.setState({graph: newGraph})\n  }\n\n  updateChanges = changes => {\n    this.setState({changes})\n    window.localStorage.setItem('changes', JSON.stringify(changes))\n  }\n\n  addChange = (change: Change) => {\n    const {graph, changes} = this.state\n    if (!graph) throw new Error('No graph available now')\n    this.updateChanges(addChange(graph, changes, change))\n  }\n\n  setNodesSelection = (fromNodeId: ?NodeID, toNodeId: ?NodeID) => {\n    this.setState({fromNodeId, toNodeId}, this.pushHistory)\n  }\n\n  resetNodesSelection = () => {\n    this.setNodesSelection(null, null)\n  }\n\n  selectFromNode = (fromNodeId: NodeID) => {\n    const {graph, toNodeId} = this.state\n    if (graph) console.log('Selected FROM node', getNode(graph, fromNodeId))\n    this.setNodesSelection(fromNodeId, toNodeId || fromNodeId)\n  }\n\n  selectToNode = (toNodeId: NodeID) => {\n    const {graph, fromNodeId} = this.state\n    if (graph) console.log('Selected TO node', getNode(graph, toNodeId))\n    this.setNodesSelection(fromNodeId || toNodeId, toNodeId)\n  }\n\n  togglePinned = (id: NodeID) => {\n    let {pinned} = this.state\n    const wasPinned = pinned.indexOf(id) >= 0\n    pinned = pinned.filter(pin => pin !== id)\n    if (!wasPinned) {\n      pinned = [id, ...pinned]\n    }\n    this.setState({pinned})\n    window.localStorage.setItem('pinned', JSON.stringify(pinned))\n  }\n\n  render() {\n    const {\n      graph,\n      baseGraph,\n      loading,\n      error,\n      fromNodeId,\n      toNodeId,\n      changes,\n      showChanges,\n      pinned,\n    } = this.state\n    return (\n      <AppUI\n        baseGraph={baseGraph}\n        graph={graph}\n        loading={loading}\n        error={error}\n        fromNode={graph && resolveNode(graph, fromNodeId)}\n        toNode={graph && resolveNode(graph, toNodeId)}\n        changes={changes}\n        showChanges={showChanges}\n        pinned={pinned}\n        onAddChange={this.addChange}\n        onFromNodeSelect={this.selectFromNode}\n        onToNodeSelect={this.selectToNode}\n        onNodesSelectionReset={this.resetNodesSelection}\n        onChangesUpdate={this.updateChanges}\n        onFileDrop={this.handleDrop}\n        onShowChangesToggle={this.toggleShowChanges}\n        onPinnedToggle={this.togglePinned}\n      />\n    )\n  }\n}\n\nexport default hot(module)(App)\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport registerServiceWorker from './registerServiceWorker'\n\nconst rootEl = document.getElementById('root')\n\nregisterServiceWorker()\nReactDOM.render(<App />, rootEl)\n","// @flow\n\nimport pako from 'pako'\n\nconst DEFLATE_HEADER = 'deflate:'\nexport const encodeUrlStateHash = (state: Object) =>\n  btoa(DEFLATE_HEADER + pako.deflate(JSON.stringify(state), {to: 'string', level: 9}))\n\nexport const decodeUrlStateHash = (hash: string) => {\n  try {\n    const decoded = atob(hash)\n    const json = decoded.startsWith(DEFLATE_HEADER)\n      ? pako.inflate(decoded.slice(DEFLATE_HEADER.length), {to: 'string'})\n      : decoded\n    const state = JSON.parse(json)\n    if (!state || typeof state !== 'object') throw new Error(`Url is not an object`)\n    return state\n  } catch (error) {\n    console.error('Decoding url failed', error)\n    return {}\n  }\n}\n","// @flow\nimport {throttle} from 'lodash'\n\nexport const ABORTED = Symbol('Aborted')\n\n//\nexport const backgroundProcessor = () => {\n  let abort\n  let idleReject\n  const fn = throttle(\n    () =>\n      new Promise((resolve, reject) => {\n        if (abort) reject(abort())\n        idleReject = reject\n        setTimeout(resolve, 0)\n        // requestIdleCallback(resolve)\n      }),\n    16,\n  )\n  fn.abort = (err = ABORTED) => {\n    return new Promise(resolve => {\n      abort = () => {\n        resolve()\n        return err\n      }\n      if (idleReject) idleReject(abort())\n    })\n  }\n  return fn\n}\n","// @flow\n\nimport {mapValues} from 'lodash'\nimport {backgroundProcessor} from './utils'\n\nexport type NodeID = string\nexport type EdgeID = string\nexport type NodeKind = string\nexport type EdgeKind = string\n\nexport type EdgeSpec = {|\n  name?: string,\n  from: NodeID,\n  to: NodeID,\n  kind: EdgeKind,\n  async?: boolean,\n  enabled?: boolean,\n  // Original source object\n  original?: any,\n|}\n\nexport type Edge = {\n  ...EdgeSpec,\n  enabled: boolean,\n}\n\nexport type NodeSpec = {|\n  id: NodeID,\n  originalId: string,\n  name?: string,\n  kind: NodeKind,\n  size: number,\n  file?: string,\n  // Original source object\n  original?: any,\n|}\n\nexport type Node = {\n  ...NodeSpec,\n  parents: Array<NodeID>,\n  // Enabled children of this Node\n  children: Array<NodeID>,\n  // All children of this Node (enabled or not)\n  allChildren: Array<NodeID>,\n  treeSize?: number,\n}\n\nexport type Graph = {|\n  nodes: {[NodeID]: Node},\n  edges: {[EdgeID]: Edge},\n  errors: Array<any>,\n  cache: Object,\n  idle: $Call<typeof backgroundProcessor>,\n|}\n\nexport function createGraph(): Graph {\n  return {\n    nodes: {},\n    edges: {},\n    errors: [],\n    cache: {},\n    idle: backgroundProcessor(),\n  }\n}\n\nexport function getNodeId(kind: string, id: string): NodeID {\n  return `${kind}:${id}`\n}\nexport function getEdgeId(from: NodeID, to: NodeID): EdgeID {\n  return `${from}->${to}`\n}\n\nexport function getNode(graph: Graph, id: NodeID): Node {\n  const node = graph.nodes[id]\n  if (!node) throw new Error(`Node ${id} not found`)\n  return node\n}\n\nexport function resolveNode(graph: Graph, id: ?NodeID): ?Node {\n  if (!id) return null\n  return graph.nodes[id] || null\n}\n\nexport function getEdge(graph: Graph, id: EdgeID): Edge {\n  const edge = graph.edges[id]\n  if (!edge) throw new Error(`Edge ${id} not found`)\n  return edge\n}\n\nexport function resolveEdge(graph: Graph, id: ?EdgeID): ?Edge {\n  if (!id) return null\n  return graph.edges[id] || null\n}\n\nexport function resolveEdgeForNodes(graph: Graph, from: ?NodeID, to: ?NodeID): ?Edge {\n  if (!from || !to) return null\n  return graph.edges[getEdgeId(from, to)]\n}\n\nexport function getNodes(graph: Graph, ids: $ReadOnlyArray<NodeID>): $ReadOnlyArray<Node> {\n  return ids.map(getNode.bind(null, graph))\n}\n\nexport function getAllNodes(graph: Graph): $ReadOnlyArray<Node> {\n  return (Object.values(graph.nodes): any)\n}\n\nexport function getEdges(graph: Graph, ids: $ReadOnlyArray<EdgeID>): $ReadOnlyArray<Edge> {\n  return ids.map(getEdge.bind(null, graph))\n}\n\nexport function getChildren(graph: Graph, node: Node): $ReadOnlyArray<Edge> {\n  return getEdges(graph, node.children.map(to => getEdgeId(node.id, to)))\n}\n\nexport function getParents(graph: Graph, node: Node): $ReadOnlyArray<Edge> {\n  return getEdges(graph, node.parents.map(from => getEdgeId(from, node.id)))\n}\n\nexport function addNode(graph: Graph, _node: NodeSpec): Node {\n  const node = {parents: [], children: [], allChildren: [], ..._node}\n  if (graph.nodes[node.id]) throw new Error(`Node ${node.id} already in graph`)\n  graph.nodes[node.id] = node\n  return node\n}\n\nexport function addEdge(graph: Graph, _edge: EdgeSpec): Edge {\n  const edge = {enabled: true, ..._edge}\n  const id = getEdgeId(edge.from, edge.to)\n  if (graph.edges[id]) {\n    // graph.errors.push({\n    // message: 'Edge already in graph',\n    // edge,\n    // graphEdge: graph.edges[id],\n    // })\n    return graph.edges[id]\n  }\n  graph.edges[id] = edge\n  const from = getNode(graph, edge.from)\n  const to = getNode(graph, edge.to)\n  from.allChildren.push(edge.to)\n  if (edge.enabled) {\n    from.children.push(edge.to)\n    to.parents.push(edge.from)\n  }\n  return edge\n}\n\nexport function toggleEdge(graph: Graph, edge: Edge, enabled: boolean) {\n  if (edge.enabled === enabled) return\n  const from = getNode(graph, edge.from)\n  const to = getNode(graph, edge.to)\n  if (enabled) {\n    from.children.push(edge.to)\n    to.parents.push(edge.from)\n  } else {\n    from.children = from.children.filter(id => id !== edge.to)\n    to.parents = to.parents.filter(id => id !== edge.from)\n  }\n  edge.enabled = enabled\n}\n\nexport function abortGraph(graph: Graph) {\n  return graph.idle.abort()\n}\n\nexport function cloneGraph(graph: Graph): Graph {\n  const newGraph = {\n    nodes: mapValues(graph.nodes, node => ({\n      ...node,\n      parents: [...node.parents],\n      children: [...node.children],\n      allChildren: [...node.allChildren],\n    })),\n    edges: mapValues(graph.edges, edge => ({...edge})),\n    errors: [...graph.errors],\n    cache: {},\n    idle: backgroundProcessor(),\n  }\n  return newGraph\n}\n"],"sourceRoot":""}