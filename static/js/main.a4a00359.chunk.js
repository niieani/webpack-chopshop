(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{145:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i});var r=n(23),o=n(9);const s="mocked";function a(e,t,n){const a=Object(r.reject)(t,Object(r.pick)(n,["change","from","to"]));if("edge"===n.change){const t=Object(o.j)(e,n.from,n.to),r=!!t&&(t.kind!==s&&!t.async);n.enabled!==r&&a.push(n)}return a}function i(e,t){for(const n of t)if("edge"===n.change){const t=e.nodes[n.from],r=e.nodes[n.to];if(!t||!r){e.errors.push({message:"One of the nodes is missing, cannot apply the change",change:n});continue}let a=Object(o.j)(e,n.from,n.to);a||(a=Object(o.b)(e,{from:n.from,to:n.to,enabled:n.enabled,kind:s})),Object(o.l)(e,a,n.enabled)}}},218:function(e,t,n){"use strict";var r=n(0),o=n(3),s=n.n(o),a=n(141),i=n.n(a),l=n(217),c=n(7),d=n(25),h=n(26),p=n(67),m=n(9);async function u(e,t,n,r,o){const s=o.nodesKey,a=o.visited,i=[...r,t.id];if(t.id===n)return[i];a[t.id]=t;const l=[];t[s].indexOf(n)>=0&&l.push([...i,n]);for(const c of t[s]){if(a[c])continue;if(c===n)continue;const t=await u(e,Object(m.g)(e,c),n,i,o);t.length>0&&l.push(...t),await e.idle()}return l}var f=Object(d.withStyles)(e=>({root:{background:e.palette.error.dark,color:e.palette.error.contrastText,padding:16,display:"flex","align-items":"center","flex-shrink":0},icon:{"margin-right":8}}))(({classes:e,error:t,children:n})=>(void 0===n&&(n=String(t)),r.createElement("div",{className:e.root},r.createElement(c.i,{className:e.icon},"error"),r.createElement("span",{className:e.label},r.isValidElement(n)?n:String(n))))),g=n(70),b=n.n(g),N=n(142),y=n.n(N),E=n(225),S=n.n(E),w=n(23);async function v(e,t,n){const r=n.nodesKey,o=n.visited;o[t.id]=t;for(const s of t[r])o[s]||(await v(e,Object(m.g)(e,s),n),await e.idle())}function O(e,t){const n=`getDeepNodeChildren:${t.id}`;if(!e.cache[n]){const r={};e.cache[n]=v(e,t,{visited:r,nodesKey:"children"}).then(()=>(delete r[t.id],Object.keys(r)))}return e.cache[n]}function j(e,t,n){const r=`getRetainedNodes:${t.id}:${n.id}`;if(!e.cache[r]){const o={[n.id]:n},s=O(e,t),a=v(e,t,{visited:o,nodesKey:"children"}).then(()=>Object.keys(o));e.cache[r]=Promise.all([s,a]).then(([e,t])=>{if(e.indexOf(n.id)<0)return[];const r=Object(w.difference)(e,t);return r.push(n.id),r})}return e.cache[r]}function C(e,t){return t.filter(e=>"module"===e.kind&&0===e.children.length)}function k(e,t){const n=`calculateTreeSize:${t.id}`;return e.cache[n]||(e.cache[n]=O(e,t).then(n=>n.reduce((t,n)=>t+Object(m.g)(e,n).size,t.size))),e.cache[n]}function x(e,t,n){const r=`calculateRetainedTreeSize:${t.id}:${n.id}`;return e.cache[r]||(e.cache[r]=j(e,t,n).then(t=>t.reduce((t,n)=>t+Object(m.g)(e,n).size,0))),e.cache[r]}var P=Object(d.withStyles)(e=>({bigger:{color:y.a.A700},smaller:{color:S.a.A700}}))(function({baseGraph:e,graph:t,node:n,retainerRootNode:o,classes:s}){const a=o?e=>x(e,o,n):e=>k(e,n);return r.createElement(p.a,{promise:Promise.all([e?a(e):void 0,a(t)]),then:([e,t])=>r.createElement(r.Fragment,null,!o||t>0?r.createElement(r.Fragment,null,r.createElement(c.u,{title:"Node size",enterDelay:500},r.createElement("span",null,b()(n.size).format("0[.]0b")))," + ",r.createElement(c.u,{title:o?"Size of retained dependencies ":"Size of dependencies",enterDelay:500},r.createElement("span",null,b()(t-n.size).format("0[.]0b")))):"unrelated",null!=e&&t!==e?r.createElement(c.u,{title:"Difference without changes",enterDelay:500},r.createElement("span",{className:t>e?s.bigger:s.smaller}," (",t>e?"+":"-",b()(Math.abs(t-e)).format("0[.]0b"),")")):null),pending:"..."})});const I=/^(?:(.*\/(?:node_modules|web_modules|packages|~)\/)((?:@[^/]+?\/)?[^/]+))?(.*?\/)?([^/]+)?(\.[^./]+)?$/;function T({file:e}){if(!e)return"";const t=e.match(I);return t?t[2]:""}var D=Object(d.withStyles)(e=>({root:{maxWidth:"100%",display:"inline-flex",flexDirection:"row",whiteSpace:"nowrap",overflow:"hidden"},packageName:{textOverflow:"ellipsis",flexShrink:10,overflow:"hidden"},path:{textOverflow:"ellipsis",flexShrink:1e3,overflow:"hidden",minWidth:10},name:{textOverflow:"ellipsis",flexShrink:1,overflow:"hidden"},extension:{flexShrink:0}}))(function({node:e,hidePackage:t,onlyPackage:n,tooltip:o,children:a,classes:i,className:l}){const d=function({file:e,name:t,id:n}){if(!e)return{name:t||String(n)||"(unknown)"};const r=e.match(I);return r?{pathToPackage:r[1],packageName:r[2],path:r[3],name:r[4],extension:r[5]}:{path:e}}(e),h=t?"":d.packageName,p=n?"":(d.path||"").replace(/^\/|\/$/g,""),m=n?"":(d.name||"")+(d.extension||""),u=r.createElement("span",{className:s()(l,i.root)},h&&r.createElement("span",{className:i.packageName},h),h&&p?"/":"",p&&r.createElement("span",{className:i.path},p),(h||p)&&m?"/":"",m&&r.createElement("span",{className:i.name},m),(h||m)&&a?r.createElement("span",null,",\xa0"):"",a&&r.createElement("span",{className:i.children},a));return o?r.createElement(c.u,{title:"boolean"===typeof o?`${e.kind}: ${e.name||""} (${String(e.originalId)})`:o,placement:"top",enterDelay:100,disableFocusListener:!0},u):u});var G=Object(d.withStyles)(e=>({root:{display:"flex",position:"relative",flexDirection:"column",flexShrink:0,flexGrow:0,justifyContent:"stretch"},card:{marginBottom:24,position:"relative"},edgeButton:{position:"absolute",left:-32,top:12},expand:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest}),marginLeft:"auto",[e.breakpoints.up("sm")]:{marginRight:-8}},expandOpen:{transform:"rotate(180deg)"}}))(class extends r.PureComponent{constructor(...e){var t;return t=super(...e),this.state={expanded:!1},t}render(){const e=this.props,t=e.classes,n=e.className,o=e.baseGraph,a=e.graph,i=e.node,l=e.retainerRootNode,d=e.edge,h=e.actions,p=this.state.expanded;return r.createElement("div",{className:s()(n,t.root)},r.createElement(c.c,{className:t.card},r.createElement(c.e,null,r.createElement(c.v,{variant:"headline",noWrap:!0},r.createElement(D,{node:i,hidePackage:!0,tooltip:!0})),r.createElement(c.v,{variant:"subheading"},r.createElement(D,{node:i,onlyPackage:!0})),r.createElement(c.v,{color:"textSecondary"},r.createElement(P,{baseGraph:o,graph:a,node:i,retainerRootNode:l}))),r.createElement(c.d,{className:t.actions,disableActionSpacing:!0},h,r.createElement(c.j,{className:s()(t.expand,p&&t.expandOpen),onClick:()=>this.setState({expanded:!p})},r.createElement(c.i,null,"expand_more"))),r.createElement(c.f,{in:p},r.createElement(c.e,null,r.createElement(c.v,{variant:"caption",color:"textSecondary"},"Name"),r.createElement(c.v,{variant:"body2",gutterBottom:!0},i.name),r.createElement(c.v,{variant:"caption",color:"textSecondary"},"Kind"),r.createElement(c.v,{variant:"body2",gutterBottom:!0},String(i.kind)),r.createElement(c.v,{variant:"caption",color:"textSecondary"},"ID"),r.createElement(c.v,{variant:"body2",gutterBottom:!0},String(i.originalId)),d&&r.createElement(r.Fragment,null,r.createElement(c.v,{variant:"caption",color:"textSecondary"},"Edge type"),r.createElement(c.v,{variant:"body2",gutterBottom:!0},d.kind),r.createElement(c.v,{variant:"caption",color:"textSecondary"},"Edge name"),r.createElement(c.v,{variant:"body2",gutterBottom:!0},d.name||""))))))}});var A=Object(d.withStyles)(e=>({root:{}}))(class extends r.PureComponent{render(){const e=this.props,t=e.classes,n=e.className,o=e.edge,a=e.onClick;return r.createElement(c.u,{title:`${o.enabled?"Unlink":"Link"} this node with above one`,disableFocusListener:!0,placement:"top",enterDelay:500},r.createElement(c.j,{className:s()(n,t.root),"aria-label":"Unlink",color:o.enabled?"secondary":"default",onClick:a},r.createElement(c.i,null,o.enabled?"link_off":"link")))}}),M=n(68);var F=Object(d.withStyles)(e=>({root:{},nodes:{display:"flex",flexDirection:"row"},node:{width:300,marginRight:24,position:"relative"},link:{position:"absolute",left:-24,top:0}}))(function({graph:e,chain:t,through:n,onClick:o,style:s,classes:a,checked:i}){return r.createElement("div",{style:s},r.createElement(c.o,{dense:!0,ContainerComponent:"div",button:!0,onClick:o,disableGutters:!0},r.createElement(c.q,{primary:n.length?r.createElement(D,{node:Object(m.g)(e,n[0])}):"Direct",secondary:`${t.length-1} nodes deep`,primaryTypographyProps:{noWrap:!0,color:i?"secondary":"default"}})))});var L=Object(d.withStyles)(e=>({root:{color:e.palette.text.secondary,padding:24,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",flexShrink:0,textAlign:"center"},icon:{"margin-bottom":8}}))(({classes:e,children:t,icon:n})=>r.createElement("div",{className:e.root},r.createElement("div",{className:e.icon},n),r.createElement("div",null,t)));var R=Object(d.withStyles)(e=>({root:{position:"relative"},list:{outline:0}}))(function(e){const t=e.classes,n=e.className,o=e.graph,a=e.chains,i=e.fromNode,l=e.toNode,d=e.selectedChain,h=e.onChainSelect,p=[i.id,l.id],m=a.map(e=>{const t=Object(w.difference)(e,p);return p.push(...t),{through:t,chain:e}});return r.createElement("div",{className:s()(n,t.root)},r.createElement(M.a,null,({width:e,height:n})=>r.createElement(M.b,{className:t.list,width:e,height:n,rowCount:m.length,rowHeight:54,rowRenderer:({index:e,style:t})=>{const n=m[e],s=n.chain,a=n.through;return r.createElement(F,{key:e,graph:o,chain:s,through:a,onClick:()=>h(s),style:t,checked:d.every((e,t)=>s[t]===e)})},noRowsRenderer:()=>r.createElement(L,{icon:r.createElement(c.i,null,"link_off")},"There is no connection between these nodes")})))});var $=Object(d.withStyles)(e=>({root:{display:"flex",position:"relative",flexDirection:"row",justifyContent:"stretch"},chains:{width:300,flexGrow:.2,display:"flex",flexDirection:"column",justifyContent:"stretch",marginRight:24},chainsList:{flexGrow:1},selectedChain:{display:"flex",flexDirection:"column",flexGrow:1,position:"relative",width:300},selectedChainScroll:{overflowY:"auto",padding:"0 8px 0 8px"},listProgress:{marginTop:16}}))(class extends r.PureComponent{constructor(...e){var t;return t=super(...e),this.state={selectedChain:null},this.chainsPromiseSelector=Object(h.createSelector)(e=>e.graph,e=>e.fromNode,e=>e.toNode,(e,t,n)=>t&&n?async function(e,t,n){const r=`findChains:${t.id}:${n.id}`;return e.cache[r]||(e.cache[r]=u(e,t,n.id,[],{visited:{},nodesKey:"children"})),e.cache[r]}(e,t,n):null),this._waitingForChainsPromise=void 0,this.renderSelectedChain=(()=>{const e=this.props,t=e.baseGraph,n=e.graph,o=e.pinned,s=e.fromNode,a=e.onAddChange,i=e.onFromNodeSelect,l=e.onToNodeSelect,d=e.onPinnedToggle,h=this.state.selectedChain;if(!h)return null;const p=Object(m.i)(n,h);return p.map((e,h)=>{const u=0===h,f=h===p.length-1;if(u)return null;const g=p[h-1],b=Object(m.j)(n,g.id,e.id)||{from:g.id,to:e.id,kind:"",enabled:!1};return r.createElement(r.Fragment,null,r.createElement(G,{baseGraph:t,graph:n,node:e,retainerRootNode:s,edge:b,actions:r.createElement(r.Fragment,null,r.createElement(A,{edge:b,onClick:()=>a({change:"edge",from:b.from,to:b.to,enabled:!b.enabled})}),r.createElement(c.u,{title:"Set as the first node",disableFocusListener:!0,enterDelay:500,placement:"top"},r.createElement(c.j,{onClick:()=>i(e.id)},r.createElement(c.i,null,"vertical_align_top"))),!f&&r.createElement(c.u,{title:"Set as the last node",disableFocusListener:!0,enterDelay:500,placement:"top"},r.createElement(c.j,{onClick:()=>l(e.id)},r.createElement(c.i,null,"vertical_align_bottom"))),r.createElement(c.j,{onClick:()=>d(e.id)},r.createElement(c.i,null,o.indexOf(e.id)>=0?"star":"star_border")))}))})}),this.renderChains=(e=>{const t=this.props,n=t.graph,o=t.fromNode,s=t.toNode,a=t.classes,i=this.state.selectedChain;return i&&o&&s?r.createElement(R,{className:a.chainsList,graph:n,fromNode:o,toNode:s,chains:e,selectedChain:i,onChainSelect:e=>this.setState({selectedChain:e})}):null}),t}componentDidMount(){this.componentDidUpdate({})}async componentDidUpdate(e){const t=this.props.baseGraph!==e.baseGraph,n=this.props,r=n.fromNode,o=n.toNode,s=e.fromNode,a=e.toNode,i=(r&&r.id)!==(s&&s.id)||(o&&o.id)!==(a&&a.id);if(t||i){const e=this.chainsPromiseSelector(this.props);if(this.setState({selectedChain:null}),this._waitingForChainsPromise=e,r&&o&&e){let t=await e;if(0===t.length&&(t=await async function(e,t,n){const r=`findAllChains:${t.id}:${n.id}`;return e.cache[r]||(e.cache[r]=u(e,t,n.id,[],{visited:{},nodesKey:"allChildren"})),e.cache[r]}(this.props.graph,r,o)),this._waitingForChainsPromise!==e)return;this.setState({selectedChain:t[0]||[r.id,o.id]})}}}render(){const e=this.props,t=e.className,n=e.classes,o=e.baseGraph,a=e.graph,i=e.fromNode,l=e.toNode,d=e.pinned,h=e.onPinnedToggle,m=e.onToNodeSelect,u=this.chainsPromiseSelector(this.props);return r.createElement("div",{className:s()(t,n.root)},r.createElement("div",{className:n.chains},r.createElement(c.v,{variant:"headline"},"Dependency chains"),r.createElement(c.v,{variant:"subheading",gutterBottom:!0},"Select one of the dependency chains between these two nodes. Try breaking the links between them to see the impact of your changes."),r.createElement(p.a,{promise:u,then:e=>this.renderChains(e),catch:e=>r.createElement(f,null,e),pending:r.createElement(c.m,{className:n.listProgress})})),r.createElement("div",{className:n.selectedChain},i&&r.createElement(G,{baseGraph:o,graph:a,node:i,actions:r.createElement(r.Fragment,null,i!==l&&r.createElement(c.u,{title:"Set as the last node",disableFocusListener:!0,enterDelay:500,placement:"top"},r.createElement(c.j,{onClick:()=>m(i.id)},r.createElement(c.i,null,"vertical_align_bottom"))),r.createElement(c.j,{onClick:()=>h(i.id)},r.createElement(c.i,null,d.indexOf(i.id)>=0?"star":"star_border")))}),r.createElement("div",{className:n.selectedChainScroll},this.renderSelectedChain())))}}),B=n(224),z=n.n(B);var _=Object(d.withStyles)(e=>({root:{background:z.a.A700,padding:"8px 24px 8px 24px",display:"flex",alignItems:"center",flexShrink:0,justifyContent:"center"},icon:{"margin-right":8}}))(({classes:e,children:t})=>r.createElement("div",{className:e.root},r.createElement(c.i,{className:e.icon},"warning"),r.createElement("span",{className:e.label},t)));var U=Object(d.withStyles)(e=>({root:{background:e.palette.error.dark,color:e.palette.error.contrastText,padding:"8px 24px 8px 24px",display:"flex",alignItems:"center",flexShrink:0,justifyContent:"center"},icon:{"margin-right":8}}))(({classes:e,children:t})=>r.createElement("div",{className:e.root},r.createElement(c.i,{className:e.icon},"error"),r.createElement("span",{className:e.label},t))),W=n(144),H=n(69);function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=Object(d.withStyles)(e=>({root:{},list:{maxHeight:"70vh",overflowY:"auto"},delete:{}}))(class extends r.PureComponent{render(){const e=this.props,t=e.classes,n=e.graph,o=e.changes,s=e.pinned,a=e.onChangesUpdate,i=[],l=window.location,d=l.origin,h=l.pathname,p=l.hash,u=Object(H.a)(p.slice(1)),f=`${d}${h}#${Object(H.b)(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){K(e,t,n[t])})}return e}({},u,{changes:o,pinned:s}))}`;return i.push(f),r.createElement("div",null,r.createElement(c.n,{className:t.list},o.map((e,s)=>{const l=Object(m.j)(n,e.from,e.to);if(!l)return null;const d=Object(m.g)(n,l.from),h=Object(m.g)(n,l.to),p=d.file||d.name||d.id,u=l.name||h.name||h.id;return i.push(l.enabled?`In "${p}" add "${u}"`:`In "${p}" remove "${u}"`),r.createElement(c.o,{key:s,graph:n,change:e},r.createElement(c.j,{"aria-label":"Delete",className:t.delete,onClick:()=>a(Object(w.without)(o,e))},r.createElement(c.i,null,"delete")),r.createElement(c.q,{primary:l.enabled?r.createElement(r.Fragment,null,'In "',r.createElement("b",null,p),'" add "',r.createElement("b",null,u),'"'):r.createElement(r.Fragment,null,'In "',r.createElement("b",null,p),'" remove "',r.createElement("b",null,u),'"')}),r.createElement(c.p,null))}).reverse(),0===o.length&&r.createElement(L,{icon:r.createElement(c.i,null,"block")},"No changes applied. Try breaking links between dependencies")),r.createElement(c.t,null,r.createElement(c.b,{onClick:()=>a([])},"Reset changes"),i.length>0?r.createElement(W.CopyToClipboard,{text:i.join("\n\n")},r.createElement(c.b,null,"Copy changes to clipboard")):null,r.createElement(W.CopyToClipboard,{text:f},r.createElement(c.b,null,"Copy URL to clipboard"))))}});var q=Object(d.withStyles)(e=>({root:{}}))(function({baseGraph:e,graph:t,checked:n,onClick:o,node:a,retainerRootNode:i,selectFromNode:l,selectToNode:d,selectNode:h,hidePackage:p,style:m,children:u,classes:f,className:g}){return r.createElement("div",{style:m},r.createElement(c.o,{dense:!0,disableGutters:!0,ContainerComponent:"div",button:!!o,onClick:o,className:s()(g,f.root)},r.createElement(c.q,{primary:r.createElement(D,{node:a,hidePackage:p,tooltip:!0}),primaryTypographyProps:{noWrap:!0,color:n?"secondary":"default"},secondary:r.createElement(P,{baseGraph:e,graph:t,node:a,retainerRootNode:i})}),u))}),V=n(219),Y=n.n(V);function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){X(e,t,n[t])})}return e}function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Z=e=>e.children,ee=e=>e;function te(e,t,n={}){const r=n.getKey,o=void 0===r?ee:r;return e.expanded.indexOf(o(t))>=0}const ne=(e,t={})=>n=>(function(e,t,n={},r){const o=te(e,t,n);if(null==r&&(r=!o),r===o)return e;const s=n.getKey,a=(void 0===s?ee:s)(t);return Q({},e,r?{expanded:[...e.expanded,a]}:{expanded:e.expanded.filter(e=>e!==a)})})(n,e,t),re={getKey:e=>e.name};var oe=Object(d.withStyles)(e=>({root:{display:"flex",flexDirection:"column",justifyContent:"stretch"},search:{},listContainer:{flexGrow:1,position:"relative"},list:{outline:0}}))(class extends r.PureComponent{constructor(...e){var t;return t=super(...e),this.state={search:"",expanded:[]},this.fuseSelector=Object(h.createSelector)((e,t)=>t.nodes,e=>new Y.a(e,{keys:["name","id","kind"],tokenize:!0,matchAllTokens:!0})),this.searchSelector=Object(h.createSelector)(this.fuseSelector,e=>e.search,(e,t)=>t.orderNodesBy,(e,t,n)=>{const r=t?e.search(t):e.list;return n&&!t?Object(w.orderBy)(r,...n):r}),this.pinnedSelector=Object(h.createSelector)(this.searchSelector,(e,t)=>t.pinned,(e,t)=>e.filter(e=>t.indexOf(e.id)>=0)),this.groupSelector=Object(h.createSelector)(this.searchSelector,this.pinnedSelector,(e,t)=>t.groupNodesBy,(e,t)=>t.orderGroupsBy,(e,t,n,r)=>{let o;if("package"===n){const t=Object(w.groupBy)(e,e=>"module"===e.kind?T(e)||"(root modules)":`(${e.kind}s)`);o=Object(w.map)(t,(e,t)=>({name:t,children:Object(w.sortBy)(e,"file"),size:Object(w.sumBy)(e,"size"),group:!0})),o=Object(w.orderBy)(o,...r)}else o=e.slice();return o.unshift(...t),o}),this.nodesSelector=Object(h.createSelector)(this.groupSelector,e=>e.expanded,(e,t)=>(function e(t,n,r={}){const o=[],s=r.getChildren,a=void 0===s?Z:s;for(const i of t)if(o.push(i),te(n,i,r)){const t=a(i);o.push(...e(t,n,r))}return o})(e,{expanded:t},re)),t}renderList(){const e=this.props,t=e.classes,n=e.baseGraph,o=e.graph,s=e.groupNodesBy,a=e.renderItem,i=e.renderEmpty,l=this.state.search?this.searchSelector(this.state,this.props):this.nodesSelector(this.state,this.props);return r.createElement("div",{className:t.listContainer},r.createElement(M.a,null,({width:e,height:d})=>r.createElement(M.b,{className:t.list,width:e,height:d,rowCount:l.length,rowHeight:54,rowRenderer:({index:e,style:t})=>{const i=l[e];return i.group?r.createElement(c.o,{dense:!0,ContainerComponent:"div",button:!0,onClick:()=>this.setState(ne(i,re)),disableGutters:!0,style:t,key:e,divider:!0},r.createElement(c.q,{primary:i.name,secondary:`${b()(i.size).format("0.0b")} in ${i.children.length}`}),r.createElement(c.i,null,te(this.state,i,re)?"expand_less":"expand_more")):a({node:i,key:e,baseGraph:n,graph:o,hidePackage:Boolean(s),style:t})},noRowsRenderer:i})))}render(){const e=this.props,t=e.classes,n=e.className,o=e.loading,a=this.state.search;return r.createElement("div",{className:s()(n,t.root)},r.createElement(c.k,{className:t.search,id:"adornment-password",type:"text",value:a,onChange:e=>this.setState({search:e.target.value}),endAdornment:a&&r.createElement(c.l,{position:"end"},r.createElement(c.j,{color:"inherit","aria-label":"Clear search",onClick:()=>this.setState({search:""})},r.createElement(c.i,{color:"inherit"},"clear"))),placeholder:"Search"}),o?r.createElement(c.m,{className:t.listProgress}):this.renderList())}});var se=Object(d.withStyles)(e=>({root:{display:"flex",position:"relative",flexDirection:"column",justifyContent:"stretch"},list:{flexGrow:1},listProgress:{marginTop:16},modeMenuItem:{width:300}}))(class extends r.Component{constructor(...e){var t;return t=super(...e),this.state={modeId:null,modeMenuAnchor:null},this.modeSelector=((e,t)=>t.modes[e.modeId||""]||t.modes[t.defaultMode]),this.nodesSelector=((e,t)=>this.modeSelector(e,t).getNodes()),this.nodesPromiseSelector=Object(h.createSelector)(this.nodesSelector,e=>Promise.resolve(e)),this.handleModeMenuOpen=(e=>{this.setState({modeMenuAnchor:e.currentTarget})}),this.handleModeMenuClose=(()=>{this.setState({modeMenuAnchor:null})}),t}static getDerivedStateFromProps({modes:e={}},t={}){return e[t.modeId]?null:{modeId:null}}renderList(e){const t=this.props,n=t.classes,o=t.baseGraph,s=t.graph,a=t.retainerRootNode,i=t.selected,l=t.pinned,d=t.onNodeSelect,h=this.modeSelector(this.state,this.props),p=h.listProps?h.listProps():{};return r.createElement(oe,Object.assign({className:n.list,nodes:e||[],loading:null==e,baseGraph:o,graph:s,pinned:l,selected:i,groupNodesBy:"package",orderNodesBy:void 0,orderGroupsBy:[["size"],["desc"]],renderItem:e=>r.createElement(q,Object.assign({},e,{retainerRootNode:a,onClick:()=>d(e.node.id),checked:!!i&&i.id===e.node.id},h.itemProps&&h.itemProps(e)),l.indexOf(e.node.id)>=0?r.createElement(c.p,null,r.createElement(c.i,{color:"disabled",fontSize:"inherit"},"star")):null),renderEmpty:()=>r.createElement(L,{icon:r.createElement(c.i,null,"block")},h.renderEmpty())},p))}renderModeMenu(){const e=this.props,t=e.classes,n=e.modes,o=e.defaultMode,s=this.state,a=s.modeMenuAnchor,i=s.modeId||o;return r.createElement(c.r,{id:"lock-menu",anchorEl:a,open:Boolean(a),onClose:this.handleModeMenuClose},Object(w.map)(n,(e,n)=>r.createElement(c.s,{className:t.modeMenuItem,key:n,selected:n===i,onClick:()=>this.setState({modeId:n,modeMenuAnchor:null})},e.renderTitle())))}render(){const e=this.props,t=e.className,n=e.classes,o=this.modeSelector(this.state,this.props),a=this.nodesPromiseSelector(this.state,this.props);return r.createElement("div",{className:s()(t,n.root)},r.createElement(c.o,{button:!0,disableGutters:!0,className:n.header,onClick:this.handleModeMenuOpen},r.createElement(c.q,null,r.createElement(c.v,{variant:"headline"},o.renderTitle()),r.createElement(c.v,{variant:"subheading",gutterBottom:!0},o.renderInfo())),r.createElement(c.i,{color:"action",className:n.headerMore},"more_vert")),this.renderModeMenu(),r.createElement(p.a,{promise:a,then:e=>this.renderList(e),pending:()=>this.renderList(null)}))}});function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ie=async(e,t)=>(e=e,t=t.filter(t=>"module"===t.kind&&t.parents.every(t=>"module"!==Object(m.g)(e,t).kind)),t=await Promise.all(t.map(async t=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){ae(e,t,n[t])})}return e})({},t,{treeSize:await k(e,t)}))));var le;var ce=Object(d.withStyles)({root:{}})(class extends r.PureComponent{constructor(...e){var t;return t=super(...e),this.allNodesSelector=Object(h.createSelector)((e,t)=>t.graph,e=>Object(m.f)(e)),this.getAllNodes=(()=>this.allNodesSelector(this.state,this.props)),this.entryNodesSelector=Object(h.createSelector)((e,t)=>t.graph,e=>ie(e,Object(m.f)(e))),this.getEntryNodes=(()=>this.entryNodesSelector(this.state,this.props)),this.leafNodesSelector=Object(h.createSelector)((e,t)=>t.graph,e=>C(0,Object(m.f)(e))),this.getLeafNodes=(()=>this.leafNodesSelector(this.state,this.props)),this.directParentNodesSelector=Object(h.createSelector)((e,t)=>t.graph,(e,t)=>t.fromNode,(e,t)=>t?Object(m.i)(e,t.parents):[]),this.getDirectParentNodes=(()=>this.directParentNodesSelector(this.state,this.props)),this.parentNodesSelector=Object(h.createSelector)((e,t)=>t.graph,(e,t)=>t.toNode,(e,t)=>t?function(e,t){const n=`getDeepNodeParents:${t.id}`;if(!e.cache[n]){const r={};e.cache[n]=v(e,t,{visited:r,nodesKey:"parents"}).then(()=>(delete r[t.id],Object.keys(r)))}return e.cache[n]}(e,t).then(t=>Object(m.i)(e,t)):[]),this.getParentNodes=(()=>this.parentNodesSelector(this.state,this.props)),this.parentEntryNodesSelector=Object(h.createSelector)((e,t)=>t.graph,this.parentNodesSelector,async(e,t)=>ie(e,await t)),this.getParentEntryNodes=(()=>this.parentEntryNodesSelector(this.state,this.props)),this.modes={all:{getNodes:this.getAllNodes,renderTitle:()=>"All Nodes",renderInfo:()=>"Select node to start from",renderEmpty:()=>"Nothing found"},directParents:{getNodes:this.getDirectParentNodes,renderTitle:()=>"Direct Parents",renderInfo:()=>{const e=this.props.fromNode;return e?r.createElement(r.Fragment,null,"Move up to direct parents of ",r.createElement(D,{node:e})):null},renderEmpty:()=>"No parents found"},parents:{getNodes:this.getParentNodes,renderTitle:()=>"All Parents",renderInfo:()=>{const e=this.props.toNode;return e?r.createElement(r.Fragment,null,"Move up to parents of ",r.createElement(D,{node:e})):null},renderEmpty:()=>"No parents found"},parentEntries:{getNodes:this.getParentEntryNodes,renderTitle:()=>"Parent Entry Points",renderInfo:()=>{const e=this.props.toNode;return e?r.createElement(r.Fragment,null,"Move up to parent entries of ",r.createElement(D,{node:e})):null},renderEmpty:()=>"No entries found",listProps:()=>({groupNodesBy:"",orderNodesBy:[["treeSize"],["desc"]]})},entries:{getNodes:this.getEntryNodes,renderTitle:()=>"Entry Modules",renderInfo:()=>"Select entry module to start from",renderEmpty:()=>"No modules found",listProps:()=>({groupNodesBy:"",orderNodesBy:[["treeSize"],["desc"]]})}},this.initialModes={initialAll:this.modes.all,initialEntries:this.modes.entries,initialLeafs:{getNodes:this.getLeafNodes,renderTitle:()=>"Leaf Modules",renderInfo:()=>"Select modules without children",renderEmpty:()=>"No modules found"}},t}render(){const e=this.props,t=e.classes,n=e.className,o=e.fromNode,a=e.toNode,i=e.baseGraph,l=e.graph,c=e.pinned,d=e.onNodeSelect;return r.createElement(se,{className:s()(t.root,n),modes:o&&a?this.modes:this.initialModes,defaultMode:o&&a?"parents":"initialAll",baseGraph:i,graph:l,pinned:c,onNodeSelect:d,selected:o})}});function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he=Object(d.withStyles)({root:{}})(class extends r.PureComponent{constructor(...e){var t;return t=super(...e),this.allNodesSelector=Object(h.createSelector)((e,t)=>t.graph,e=>Object(m.f)(e)),this.getAllNodes=(()=>this.allNodesSelector(this.state,this.props)),this.leafNodesSelector=Object(h.createSelector)((e,t)=>t.graph,e=>C(0,Object(m.f)(e))),this.getLeafNodes=(()=>this.leafNodesSelector(this.state,this.props)),this.directChildrenNodesSelector=Object(h.createSelector)((e,t)=>t.graph,(e,t)=>t.fromNode,(e,t)=>t.toNode,async(e,t,n)=>{if(!t||!n)return[];let r=await Object(m.i)(e,n.children);return r=await Promise.all(r.map(async n=>(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){de(e,t,n[t])})}return e})({},n,{treeSize:await x(e,t,n)})))}),this.getDirectChildrenNodes=(()=>this.directChildrenNodesSelector(this.state,this.props)),this.retainedChildrenNodesSelector=Object(h.createSelector)((e,t)=>t.graph,(e,t)=>t.fromNode,(e,t)=>t.toNode,(e,t,n)=>t&&n?t===n?this.getChildrenNodes():j(e,t,n).then(t=>Object(m.i)(e,Object(w.without)(t,n.id))):[]),this.getRetainedChildrenNodes=(()=>this.retainedChildrenNodesSelector(this.state,this.props)),this.childrenNodesSelector=Object(h.createSelector)((e,t)=>t.graph,(e,t)=>t.fromNode,(e,t)=>t?O(e,t).then(t=>Object(m.i)(e,t)):[]),this.getChildrenNodes=(()=>this.childrenNodesSelector(this.state,this.props)),this.childAsyncNodesSelector=Object(h.createSelector)((e,t)=>t.graph,(e,t)=>t.fromNode,(e,t)=>t?function(e,t){const n=`getDisabledLeafChildren:${t.id}`;if(!e.cache[n]){const r={};e.cache[n]=v(e,t,{visited:r,nodesKey:"children"}).then(()=>{const e=Object.values(r),t={};for(const n of e)for(const e of n.allChildren)r[e]||(t[e]=!0);return Object.keys(t)})}return e.cache[n]}(e,t).then(t=>Object(m.i)(e,t)):[]),this.getChildAsyncNodes=(()=>this.childAsyncNodesSelector(this.state,this.props)),this.childLeafNodesSelector=Object(h.createSelector)((e,t)=>t.graph,this.childrenNodesSelector,async(e,t)=>C(0,await t)),this.getChildLeafNodes=(()=>this.childLeafNodesSelector(this.state,this.props)),this.modes={all:{getNodes:this.getAllNodes,renderTitle:()=>"All Nodes",renderInfo:()=>"Select node to start from",renderEmpty:()=>"Nothing found"},children:{getNodes:this.getChildrenNodes,renderTitle:()=>"All Children",renderInfo:()=>{const e=this.props.fromNode;return e?r.createElement(r.Fragment,null,"Move down to children of ",r.createElement(D,{node:e})):null},renderEmpty:()=>"No children found"},retainedChildren:{getNodes:this.getRetainedChildrenNodes,renderTitle:()=>"Retained Children",renderInfo:()=>{const e=this.props.toNode;return e?r.createElement(r.Fragment,null,"Move down to children retained by ",r.createElement(D,{node:e})):null},renderEmpty:()=>"No children found"},directChildren:{getNodes:this.getDirectChildrenNodes,renderTitle:()=>"Direct Children",renderInfo:()=>{const e=this.props.toNode;return e?r.createElement(r.Fragment,null,"Move down to direct children of ",r.createElement(D,{node:e})):null},renderEmpty:()=>"No children found",listProps:()=>({groupNodesBy:"",orderNodesBy:[["treeSize"],["desc"]]})},asyncLeafs:{getNodes:this.getChildAsyncNodes,renderTitle:()=>"Child Async Modules",renderInfo:()=>{const e=this.props.fromNode;return e?r.createElement(r.Fragment,null,"Move down to child async modules of ",r.createElement(D,{node:e})):null},renderEmpty:()=>"No modules found",listProps:()=>({groupNodesBy:"",orderNodesBy:[["name"],["asc"]]}),itemProps:()=>({retainerRootNode:null})},childLeafs:{getNodes:this.getChildLeafNodes,renderTitle:()=>"Child Leaf Modules",renderInfo:()=>{const e=this.props.fromNode;return e?r.createElement(r.Fragment,null,"Move down to child leaf modules of ",r.createElement(D,{node:e})):null},renderEmpty:()=>"No modules found"},leafs:{getNodes:this.getLeafNodes,renderTitle:()=>"Leaf Modules",renderInfo:()=>"Select leaf module to finish at",renderEmpty:()=>"No modules found"}},t}render(){const e=this.props,t=e.classes,n=e.className,o=e.fromNode,a=e.toNode,i=e.baseGraph,l=e.graph,c=e.pinned,d=e.onNodeSelect;return r.createElement(se,{className:s()(t.root,n),modes:this.modes,defaultMode:"children",baseGraph:i,graph:l,pinned:c,onNodeSelect:d,selected:a,retainerRootNode:o})}});t.a=Object(d.withStyles)(e=>({root:{display:"flex",height:"100vh",minWidth:1200,flexDirection:"column",justifyContent:"stretch",fontFamily:["Roboto","Helvetica","Arial","sans-serif"]},container:{maxWidth:2e3,minWidth:1200,width:"100vw",marginLeft:"auto",marginRight:"auto"},panes:{display:"flex",flexDirection:"row",flexGrow:1,justifyContent:"space-between",padding:"24px 24px 0 24px"},parentsExplorer:{width:250,flexShrink:0,flexGrow:.2,marginRight:48},pathsExplorer:{flexShrink:1,flexGrow:1,marginRight:48},childrenExplorer:{width:250,flexShrink:0,flexGrow:.2},title:{marginLeft:"auto",textTransform:"uppercase"},search:{color:"#fff",borderBottom:"2px solid #fff",width:300},dropzone:{},openButton:{},openFileMessage:{textAlign:"center",width:"30em",alignSelf:"center",margin:"auto",cursor:"pointer"}}))(class extends r.Component{constructor(...e){var t;return t=super(...e),this.dropzone=void 0,t}renderGraph(){const e=this.props,t=e.baseGraph,n=e.graph,o=e.fromNode,a=e.toNode,i=e.pinned,l=e.classes,c=e.onFromNodeSelect,d=e.onToNodeSelect,h=e.onAddChange,p=e.onPinnedToggle;return n&&t?r.createElement("div",{className:s()(l.container,l.panes)},r.createElement(ce,{className:l.parentsExplorer,baseGraph:t,graph:n,pinned:i,toNode:a,fromNode:o,onNodeSelect:c}),o&&a?r.createElement($,{className:l.pathsExplorer,baseGraph:t,graph:n,pinned:i,fromNode:o,toNode:a,onFromNodeSelect:c,onToNodeSelect:d,onAddChange:h,onPinnedToggle:p}):null,o?r.createElement(he,{className:l.childrenExplorer,baseGraph:t,graph:n,pinned:i,toNode:a,fromNode:o,onNodeSelect:d}):null):null}render(){const e=this.props,t=e.loading,n=e.error,o=e.graph,s=e.showChanges,a=e.changes,d=e.pinned,h=e.fromNode,p=e.classes,m=e.onNodesSelectionReset,u=e.onChangesUpdate,f=e.onFileDrop,g=e.onShowChangesToggle;return r.createElement(l.a,{multiple:!1,activeClassName:"",rejectClassName:"",accept:".json",onDrop:f,className:p.dropzone,disableClick:!0,ref:e=>{this.dropzone=e}},r.createElement("div",{className:p.root},r.createElement(c.g,null),r.createElement(c.a,{position:"static"},r.createElement(c.t,{variant:"regular",className:p.container},!t&&r.createElement(c.b,{color:"inherit",onClick:()=>this.dropzone.open()},"Open stats"),o&&r.createElement(c.b,{color:"inherit",onClick:g},"See changes",a.length?` (${a.length})`:null),h&&r.createElement(c.b,{color:"inherit",onClick:m},"Choose root node"),r.createElement(c.v,{variant:"title",color:"inherit",className:p.title},"Webpack Chop Shop"))),t&&r.createElement(i.a,{className:p.progress}),o&&o.errors.length>0&&r.createElement(_,null,"There where ",o.errors.length," errors found. Check the console for more"),n&&r.createElement(U,null,String(n)),this.renderGraph(),!o&&!t&&r.createElement("div",{onClick:()=>this.dropzone.open(),className:p.openFileMessage},r.createElement(L,{icon:r.createElement(c.i,{color:"inherit",fontSize:"default"},"open_in_browser")},"First,"," ",r.createElement("a",{href:"https://webpack.js.org/api/cli/#stats-options",target:"_blank",rel:"noopener noreferrer"},"generate the stats file in webpack"),", then click here or drop it anywhere on the page to start")),o&&r.createElement(c.h,{anchor:"top",open:s,onClose:g},r.createElement("div",{className:p.container},r.createElement(J,{graph:o,changes:a,pinned:d,onChangesUpdate:u})))))}})},227:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var r=n(9);async function o(e,t={}){const n=Object(r.e)(),o=t.enableAllAsyncImports,s=void 0!==o&&o,a=t.includeChunks,i=void 0!==a&&a,l=t.includeAssets,c=void 0===l||l,d=e.chunks,h=void 0===d?[]:d,p=e.assets,m=void 0===p?[]:p,u=e.modules,f=void 0===u?[]:u;if(i)for(const g of h)Object(r.c)(n,{id:Object(r.h)("chunk",g.id),originalId:g.id,kind:g.reason&&g.reason.indexOf("split chunk")?"split-chunk":"chunk",name:g.names[0],size:0,original:g}),await n.idle();if(c)for(const g of m)Object(r.c)(n,{id:Object(r.h)("asset",g.name),originalId:g.name,kind:"asset",name:g.name,size:g.size,original:g}),await n.idle();for(const g of f){if(null==g.id)continue;const e=g.name.indexOf(" + ")>0,t=g.name.indexOf(" namespace object")>0,o=e?"concat":t?"namespace":"module";Object(r.c)(n,{id:Object(r.h)("module",g.identifier),originalId:g.id,kind:o,name:g.name,file:e?void 0:(g.name||"").replace(/^.*!/),size:g.size,original:g}),await n.idle()}for(const g of f)if(null!=g.id){if(i)for(const e of g.chunks)Object(r.b)(n,{from:Object(r.h)("chunk",e),to:Object(r.h)("module",g.identifier),kind:"chunk child",original:g});if(c)for(const e of g.assets)Object(r.b)(n,{from:Object(r.h)("module",g.identifier),to:Object(r.h)("asset",e),kind:"asset child",original:g});for(const e of g.reasons){const t=e.type||"";if(null==e.moduleId)continue;const o=t.indexOf("import()")>=0&&t.indexOf("eager")<0;Object(r.b)(n,{from:Object(r.h)("module",e.moduleIdentifier),to:Object(r.h)("module",g.identifier),kind:t,name:e.userRequest,async:o,enabled:!(o&&!s),original:e})}await n.idle()}return n}},229:function(e,t,n){"use strict";(function(e){var r=n(0),o=n(228),s=n(23),a=n(227),i=n(9),l=n(145),c=n(218),d=n(69);t.a=Object(o.hot)(e)(class extends r.Component{constructor(...e){var t;return t=super(...e),this.state={loading:!1,error:null,baseGraph:null,graph:null,fromNodeId:null,toNodeId:null,changes:[],showChanges:!1,pinned:[]},this.handleStorageEvent=(e=>{if("pinned"===e.key&&e.newValue){const t=JSON.parse(e.newValue);t!==this.state.pinned&&this.setState({pinned:t})}}),this.handleHistoryChange=(()=>{const e=(window.location.hash||"#").slice(1);if(!e)return;const t=Object(d.a)(e);this.setState(Object(s.pick)(t,["fromNodeId","toNodeId","changes","pinned"]))}),this.pushHistory=(()=>{const e=this.state,t=e.fromNodeId,n=e.toNodeId,r=Object(d.b)({fromNodeId:t,toNodeId:n});window.history.pushState(null,null,`#${r}`)}),this.openFile=(async e=>{this.setState({loading:!0,error:null,baseGraph:null,graph:null});try{const t=await e();if(null===t)return void this.setState({loading:!1});console.time("conversion");const n=await Object(a.a)(t);console.timeEnd("conversion"),console.log("Graph: ",n),console.warn("Errors found: ",n.errors),this.setState({loading:!1,graph:n,baseGraph:n})}catch(e){console.error(e),this.setState({loading:!1,error:e})}}),this.handleDrop=(([e],[t])=>{t?this.setState({error:"Only webpack build stats in json format are accepted!"}):this.openFile(()=>new Promise((t,n)=>{console.time("loading");const r=new FileReader;r.onload=(()=>{console.timeEnd("loading"),console.time("parsing");const e=JSON.parse(r.result);console.timeEnd("parsing"),t(e)}),r.onerror=(()=>{console.timeEnd("loading"),n("Could not read the file")}),r.readAsBinaryString(e)}))}),this.toggleShowChanges=(()=>{this.setState({showChanges:!this.state.showChanges})}),this.applyChanges=(()=>{const e=this.state,t=e.baseGraph,n=e.graph,r=e.changes;if(!n||!t)return;const o=Object(i.d)(t);n!==t&&Object(i.a)(n),Object(l.b)(o,r),this.setState({graph:o})}),this.updateChanges=(e=>{this.setState({changes:e}),window.localStorage.setItem("changes",JSON.stringify(e))}),this.addChange=(e=>{const t=this.state,n=t.graph,r=t.changes;if(!n)throw new Error("No graph available now");this.updateChanges(Object(l.a)(n,r,e))}),this.setNodesSelection=((e,t)=>{this.setState({fromNodeId:e,toNodeId:t},this.pushHistory)}),this.resetNodesSelection=(()=>{this.setNodesSelection(null,null)}),this.selectFromNode=(e=>{const t=this.state,n=t.graph,r=t.toNodeId;n&&console.log("Selected FROM node",Object(i.g)(n,e)),this.setNodesSelection(e,r||e)}),this.selectToNode=(e=>{const t=this.state,n=t.graph,r=t.fromNodeId;n&&console.log("Selected TO node",Object(i.g)(n,e)),this.setNodesSelection(r||e,e)}),this.togglePinned=(e=>{let t=this.state.pinned;const n=t.indexOf(e)>=0;t=t.filter(t=>t!==e),n||(t=[e,...t]),this.setState({pinned:t}),window.localStorage.setItem("pinned",JSON.stringify(t))}),t}async componentDidMount(){this.initLocalStorage(),this.initHistory(),Object({NODE_ENV:"production",PUBLIC_URL:"/webpack-chopshop"}).REACT_APP_STATS&&this.openFile(async()=>{console.time("loading");const e=await fetch(`./${Object({NODE_ENV:"production",PUBLIC_URL:"/webpack-chopshop"}).REACT_APP_STATS||""}`);console.timeEnd("loading"),console.time("parsing");const t=await e.json();return console.timeEnd("parsing"),t})}componentDidUpdate(e,t){const n=t.baseGraph!==this.state.baseGraph,r=!Object(s.isEqual)(t.changes,this.state.changes);(n||r)&&this.applyChanges()}initLocalStorage(){try{const e=JSON.parse(window.localStorage.getItem("pinned")||"[]"),t=JSON.parse(window.localStorage.getItem("changes")||"[]");this.setState({pinned:e,changes:t}),window.addEventListener("storage",this.handleStorageEvent)}catch(e){console.error("Local storage failed to initialize",e)}}initHistory(){try{window.addEventListener("popstate",this.handleHistoryChange),this.handleHistoryChange()}catch(e){console.error("History failed to initialize",e)}}render(){const e=this.state,t=e.graph,n=e.baseGraph,o=e.loading,s=e.error,a=e.fromNodeId,l=e.toNodeId,d=e.changes,h=e.showChanges,p=e.pinned;return r.createElement(c.a,{baseGraph:n,graph:t,loading:o,error:s,fromNode:t&&Object(i.k)(t,a),toNode:t&&Object(i.k)(t,l),changes:d,showChanges:h,pinned:p,onAddChange:this.addChange,onFromNodeSelect:this.selectFromNode,onToNodeSelect:this.selectToNode,onNodesSelectionReset:this.resetNodesSelection,onChangesUpdate:this.updateChanges,onFileDrop:this.handleDrop,onShowChangesToggle:this.toggleShowChanges,onPinnedToggle:this.togglePinned})}})}).call(this,n(214)(e))},230:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),s=n(27),a=n.n(s),i=(n(577),n(229));const l=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function c(e){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=(()=>{const t=e.installing;t.onstatechange=(()=>{"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))})})}).catch(e=>{console.error("Error during service worker registration:",e)})}const d=document.getElementById("root");!function(){if("serviceWorker"in navigator){if(new URL("/webpack-chopshop",window.location).origin!==window.location.origin)return;window.addEventListener("load",()=>{const e="/webpack-chopshop/service-worker.js";l?(e=e,fetch(e).then(t=>{404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):c(e)}).catch(()=>{console.log("No internet connection found. App is running in offline mode.")}),navigator.serviceWorker.ready.then(()=>{console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):c(e)})}var e}(),a.a.render(o.a.createElement(i.a,null),d)},577:function(e,t,n){},591:function(e,t,n){n(590),e.exports=n(230)},69:function(e,t,n){"use strict";n.d(t,"b",function(){return s}),n.d(t,"a",function(){return a});var r=n(143),o=n.n(r);const s=e=>btoa("deflate:"+o.a.deflate(JSON.stringify(e),{to:"string",level:9})),a=e=>{try{const t=atob(e),n=t.startsWith("deflate:")?o.a.inflate(t.slice("deflate:".length),{to:"string"}):t,r=JSON.parse(n);if(!r||"object"!==typeof r)throw new Error("Url is not an object");return r}catch(e){return console.error("Decoding url failed",e),{}}}},9:function(e,t,n){"use strict";var r=n(23);const o=Symbol("Aborted"),s=()=>{let e,t;const n=Object(r.throttle)(()=>new Promise((n,r)=>{e&&r(e()),t=r,setTimeout(n,0)}),16);return n.abort=((n=o)=>new Promise(r=>{e=(()=>(r(),n)),t&&t(e())})),n};function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){i(e,t,n[t])})}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){return{nodes:{},edges:{},errors:[],cache:{},idle:s()}}function c(e,t){return`${e}:${t}`}function d(e,t){return`${e}->${t}`}function h(e,t){const n=e.nodes[t];if(!n)throw new Error(`Node ${t} not found`);return n}function p(e,t){return t&&e.nodes[t]||null}function m(e,t,n){return t&&n?e.edges[d(t,n)]:null}function u(e,t){return t.map(h.bind(null,e))}function f(e){return Object.values(e.nodes)}function g(e,t){const n=a({parents:[],children:[],allChildren:[]},t);if(e.nodes[n.id])throw new Error(`Node ${n.id} already in graph`);return e.nodes[n.id]=n,n}function b(e,t){const n=a({enabled:!0},t),r=d(n.from,n.to);if(e.edges[r])return e.edges[r];e.edges[r]=n;const o=h(e,n.from),s=h(e,n.to);return o.allChildren.push(n.to),n.enabled&&(o.children.push(n.to),s.parents.push(n.from)),n}function N(e,t,n){if(t.enabled===n)return;const r=h(e,t.from),o=h(e,t.to);n?(r.children.push(t.to),o.parents.push(t.from)):(r.children=r.children.filter(e=>e!==t.to),o.parents=o.parents.filter(e=>e!==t.from)),t.enabled=n}function y(e){return e.idle.abort()}function E(e){return{nodes:Object(r.mapValues)(e.nodes,e=>a({},e,{parents:[...e.parents],children:[...e.children],allChildren:[...e.allChildren]})),edges:Object(r.mapValues)(e.edges,e=>a({},e)),errors:[...e.errors],cache:{},idle:s()}}n.d(t,"e",function(){return l}),n.d(t,"h",function(){return c}),n.d(t,"g",function(){return h}),n.d(t,"k",function(){return p}),n.d(t,"j",function(){return m}),n.d(t,"i",function(){return u}),n.d(t,"f",function(){return f}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return b}),n.d(t,"l",function(){return N}),n.d(t,"a",function(){return y}),n.d(t,"d",function(){return E})}},[[591,0,1]]]);
//# sourceMappingURL=main.a4a00359.chunk.js.map